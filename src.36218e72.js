parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"ul02":[function(require,module,exports) {
"use strict";var e;function n(n){if(void 0===n&&(n="https://mapgl.2gis.com/api/js"),"undefined"==typeof window)throw new Error("mapgl is supported only in browser environment");return t(n).then(function(){return e=window.mapgl})}function t(e){return new Promise(function(n,t){var o=document.createElement("script");o.type="text/javascript",o.async=!0,o.crossOrigin="anonymous",o.src=e,document.body.appendChild(o),o.addEventListener("load",function(){n()}),o.addEventListener("error",function(e){t(e)})})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.load=void 0,exports.load=n;
},{}],"C9JJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.runner=void 0,exports.runner={hostname:"127.0.0.1",port:3003};
},{}],"oGxm":[function(require,module,exports) {
"use strict";function e(o){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(o)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.runTest=exports.cases=void 0;var o=[s(11,{animate:!1}),s(16,4e3),s(15,200),s(14,0),c(5e3)],t=[c(3e3),s(17),d([82.90849685668945,54.98963080619362],{duration:2500},3e3),s(14,2e3),d([82.93664932250978,55.01257157027201],1e3),s(17,{duration:1e3},2e3),d([82.91759490966797,55.03353169388017],{duration:2e3},3e3),s(11,{duration:1e3},2e3),d([82.99346923828126,54.990123235010564],1e3),s(14,2e3),d([83.05990219116212,54.961601652754766],{duration:1e3},1500),d([83.0900287628174,54.87082857361671],{duration:3e3},4e3),s(17,2e3),s(11,2e3),d([82.96875000000001,55.02310220421264],1e3),s(17,2e3),d([82.90557861328126,55.032547895706465],{duration:5e3},6e3),s(14,2e3),d([82.86300659179689,54.98362268811953],{duration:3e3},3500),s(17),d([82.89753198623659,54.979657822639815],{duration:3e3},3500)],n=[c(3e3),s(18,{duration:3e3},4e3),d([82.94197082519533,55.01454012325133],{duration:4e4},41e3),d([82.91227340698244,55.041401209743334],{duration:3e4},31e3)],r=[d([33.00456047058106,34.671123309195046],{animate:!1},0),s(17,5e3),d([33.06970596313477,34.70083628588871],{duration:25e3},27e3),d([33.00456047058106,34.671123309195046],{duration:25e3},27e3)],u=[c(3e3),s(18,4e3),d([82.94197082519533,55.01454012325133],{duration:4e4},41e3),d([82.91227340698244,55.041401209743334],{duration:3e4},31e3)],i=[d([37.6816,55.75346],{animate:!1},0),s(11,5e3),d([37.6016,55.77346],{duration:2500},3e3),s(13,2e3),d([37.6816,55.75346],1e3),s(17,{duration:1e3},2e3),d([37.6816,55.75346],{duration:2e3},3e3),s(15,{duration:1e3},2e3),d([37.6816,55.75346],1e3),s(14,2e3),d([37.6216,55.55346],{duration:1e3},1500),d([37.7216,55.85346],{duration:2e3},3e3),s(17,2e3),s(9,2e3),d([37.5216,55.55346],{duration:1e3},1500),d([38.5216,55.85346],{duration:3e3},4e3),s(11,2e3),d([37.5816,55.85346],{duration:4e3},5e3),d([37.9016,55.55346],{duration:4e3},5e3),s(14,2e3),d([37.4816,55.75346],{duration:2500},3500),s(16,2e3),d([37.61388,55.75158],{duration:3e3},3500),d([37.60235,55.75438],{duration:3e3},3500),s(17,2e3),d([37.601692,55.744965],{duration:2e3},3500),d([37.58532,55.746361],{duration:2e3},3500)];function a(e,o){var t=exports.cases[e];if(t){var n=Promise.resolve();return t.forEach(function(e){n=n.then(function(t){return e(t,o)})}),n}console.error('Test "'+e+'" not found')}function d(o,t,n){return"object"!==e(t)&&(n=t),n=void 0===n?3e3:n,function(e,r){return console.log("Set center to "+o.join(", ")),r.setCenter(o,t),c(n)()}}function s(o,t,n){return"object"!==e(t)&&(n=t),n=void 0===n?3e3:n,function(e,r){return console.log("Set zoom to "+o),r.setZoom(o,t),c(n)()}}function c(e){return function(o){return new Promise(function(t){console.log("Wait "+e+"ms"),setTimeout(function(){return t(o)},e)})}}exports.cases={common:o,memory:t,beauty:n,lemesos:r,perf:u,moscow:i},exports.runTest=a;
},{}],"Epnx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.keyedStats=exports.stats=void 0;var t=function(t){return t.sort(function(t,r){return t-r})},r=function(t){return t.reduce(function(t,r){return t+r},0)},e=function(t){return r(t)/t.length},n=function(t){var n=e(t),u=t.map(function(t){return Math.pow(t-n,2)});return Math.sqrt(r(u)/(t.length-1))},u=function(r,e){var n=t(r),u=(n.length-1)*e,o=Math.floor(u),i=u-o;return void 0!==n[o+1]?n[o]+i*(n[o+1]-n[o]):n[o]},o=function(t){return Number(t.toFixed(2))};function i(t){return{q25:o(u(t,.25)),median:o(u(t,.5)),q75:o(u(t,.75)),q90:o(u(t,.9)),q95:o(u(t,.95)),q99:o(u(t,.99))}}function s(t){for(var r={},e=0,n=Object.keys(t);e<n.length;e++){var u=n[e];r[u]=i(t[u])}return r}exports.stats=i,exports.keyedStats=s;
},{}],"Yfwx":[function(require,module,exports) {
"use strict";var e=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function u(e){try{s(r.next(e))}catch(t){a(t)}}function i(e){try{s(r.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(u,i)}s((r=r.apply(e,t||[])).next())})},t=this&&this.__generator||function(e,t){var n,r,o,a,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return u.label++,{value:a[1],done:!1};case 5:u.label++,r=a[1],a=[0];continue;case 7:a=u.ops.pop(),u.trys.pop();continue;default:if(!(o=(o=u.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){u=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){u.label=a[1];break}if(6===a[0]&&u.label<o[1]){u.label=o[1],o=a;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(a);break}o[2]&&u.ops.pop(),u.trys.pop();continue}a=t.call(e,u)}catch(i){a=[6,i],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.measureRender=void 0;var n=require("./scenarios"),r=require("../../stats");function o(o,a){return e(this,void 0,void 0,function(){var e,u,i,s,c;return t(this,function(t){switch(t.label){case 0:e=4,u={tileCount:[],dynamicTileCount:[],drawCount:[],vertexCount:[],fps:[]},i=o.state.collectStats,s=NaN,o.on("framestart",function(){s=performance.now()}),o.on("frameend",function(){var e=o.state.stats;u.fps.push(Math.min(200,1e3/(performance.now()-s))),u.drawCount.push(e.drawCount),u.dynamicTileCount.push(e.dynamicTileCount),u.tileCount.push(e.tileCount),u.vertexCount.push(e.vertexCount)}),c=0,t.label=1;case 1:return c<e?(c>0&&(o.state.collectStats=!0),[4,(0,n.runTest)(a,o)]):[3,4];case 2:t.sent(),t.label=3;case 3:return c++,[3,1];case 4:return o.state.collectStats=i,[2,(0,r.keyedStats)(u)]}})})}exports.measureRender=o;
},{"./scenarios":"oGxm","../../stats":"Epnx"}],"vCxL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.__extends=e,exports.__rest=n,exports.__decorate=o,exports.__param=a,exports.__metadata=i,exports.__awaiter=c,exports.__generator=u,exports.__exportStar=l,exports.__values=s,exports.__read=p,exports.__spread=y,exports.__spreadArrays=h,exports.__spreadArray=d,exports.__await=_,exports.__asyncGenerator=v,exports.__asyncDelegator=b,exports.__asyncValues=w,exports.__makeTemplateObject=x,exports.__importStar=O,exports.__importDefault=g,exports.__classPrivateFieldGet=j,exports.__classPrivateFieldSet=P,exports.__createBinding=exports.__assign=void 0;var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};function e(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}var r=function(){return exports.__assign=r=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};function n(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]])}return r}function o(t,e,r,n){var o,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(i=(a<3?o(i):a>3?o(e,r,i):o(e,r))||i);return a>3&&i&&Object.defineProperty(e,r,i),i}function a(t,e){return function(r,n){e(r,n,t)}}function i(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function c(t,e,r,n){return new(r||(r=Promise))(function(o,a){function i(t){try{u(n.next(t))}catch(e){a(e)}}function c(t){try{u(n.throw(t))}catch(e){a(e)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(i,c)}u((n=n.apply(t,e||[])).next())})}function u(t,e){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(c){a=[6,c],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}exports.__assign=r;var f=Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]};function l(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||f(e,t,r)}function s(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function p(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,a=r.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(c){o={error:c}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i}function y(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(p(arguments[e]));return t}function h(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<r;e++)for(var a=arguments[e],i=0,c=a.length;i<c;i++,o++)n[o]=a[i];return n}function d(t,e,r){if(r||2===arguments.length)for(var n,o=0,a=e.length;o<a;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))}function _(t){return this instanceof _?(this.v=t,this):new _(t)}function v(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(t,e||[]),a=[];return n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n;function i(t){o[t]&&(n[t]=function(e){return new Promise(function(r,n){a.push([t,e,r,n])>1||c(t,e)})})}function c(t,e){try{(r=o[t](e)).value instanceof _?Promise.resolve(r.value.v).then(u,f):l(a[0][2],r)}catch(n){l(a[0][3],n)}var r}function u(t){c("next",t)}function f(t){c("throw",t)}function l(t,e){t(e),a.shift(),a.length&&c(a[0][0],a[0][1])}}function b(t){var e,r;return e={},n("next"),n("throw",function(t){throw t}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(n,o){e[n]=t[n]?function(e){return(r=!r)?{value:_(t[n](e)),done:"return"===n}:o?o(e):e}:o}}function w(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];return r?r.call(t):(t="function"==typeof s?s(t):t[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(r){e[r]=t[r]&&function(e){return new Promise(function(n,o){(function(t,e,r,n){Promise.resolve(n).then(function(e){t({value:e,done:r})},e)})(n,o,(e=t[r](e)).done,e.value)})}}}function x(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}exports.__createBinding=f;var m=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};function O(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&f(e,t,r);return m(e,t),e}function g(t){return t&&t.__esModule?t:{default:t}}function j(t,e,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(t):n?n.value:e.get(t)}function P(t,e,r,n,o){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?o.call(t,r):o?o.value=r:e.set(t,r),r}
},{}],"xX11":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaultMarkerAnchor=exports.defaultMarkerIcon=exports.cityNameSublayers=exports.landmarkRasterSizes=exports.commercialRasterSizes=exports.floorsDefaultPoiSublayer=exports.landmarkPoiSublayers=exports.personalSublayers=exports.commercialSublayers=exports.transportPoiSublayers=exports.transportPoiSublayerMetroExit=exports.branchPoiSublayers=exports.performanceCheck=exports.fences=exports.floors=exports.camera=exports.inertia=exports.zoom=exports.defaultLang=exports.render=exports.labeling=exports.identify=exports.entranceAnimation=exports.buildingAnimation=exports.tileAnimation=exports.houseHover=exports.forcedDensityPresetIndex=exports.styleMaxDpi=exports.workerResetDebounceTime=exports.analytics=exports.events=exports.fonts=exports.traffic=exports.customStyleServerUrl=exports.urls=exports.atlasSize=exports.loadModelsInfoStyleZoom=exports.modelCacheSize=exports.tiles=exports.MAP_DEFAULTS=void 0;var e=require("tslib"),o={minZoom:2,maxZoom:20};exports.MAP_DEFAULTS=o;var t={protocol:"https",server:"tile{subdomain}.maps.2gis.com",subdomains:"0123",tileSet:"vector_b",tileKey:"empty",appId:"empty",cacheRatio:2,maxUniverseZoom:8,maxRegionalZoom:15,maxDetailLevel:17,displayBounds:!1};exports.tiles=t;var a=100;exports.modelCacheSize=a;var r=13.5;exports.loadModelsInfoStyleZoom=r;var i=[2048,2048];exports.atlasSize=i;var s={tiles:"{protocol}://{host}/vt?r={request}&ts={tileSet}&key={tileKey}&appId={appId}&lang={lang}&default_lang={defaultLang}&s={sessionId}",metatile:"{protocol}://{host}/metafiles/{hash}/metatile.json?ts={tileSet}",modelInfo:"{protocol}://{host}/metafiles/{regionId}/models.json?ts={tileSet}",model:"{protocol}://{host}/metafiles/{regionId}/{name}?ts={tileSet}",convertData:"{protocol}://{host}/metafiles/{hash}/convert.json?ts={tileSet}",dynamicPoi:"{protocol}://{host}/metafiles/{regionId}/poi/{id}_{width}_{height}.png?ts={tileSet}"};exports.urls=s;var l="https://styles.api.2gis.com/styles/{id}";exports.customStyleServerUrl=l;var n={host:"traffic0.edromaps.2gis.com",url:"{protocol}://{host}/tiles?tls={tiles}&reg={regions}&tm={time}&fmt=json&z={z}",timestampUrl:"{protocol}://{host}/meta?reg={regions}&time&score",updateInterval:12e4,minZoom:10,maxZoom:16,maxDetailLevel:17};exports.traffic=n;var p={url:"https://mapgl.2gis.com/api/fonts",gamma:.08,baseSize:24,baseLineHeight:1.2,bomCharCode:65279};exports.fonts=p;var m={doubleClickTime:185,dragThreshold:2,pitchWaitingTime:200,pitchThreshold:7};exports.events=m;var c={gaCode:"UA-25529177-4",gaName:"mapglEngine"};exports.analytics=c;var x=3e3;exports.workerResetDebounceTime=x;var g=[155,230,300,400,520];exports.styleMaxDpi=g;var I=-1;exports.forcedDensityPresetIndex=I;var M={inAnimationTime:180,inAnimationType:"linear",outAnimationTime:800,outAnimationType:"linear"};exports.houseHover=M;var u={time:300,type:"linear"};exports.tileAnimation=u;var d={minStyleZoom:16,duration:500,easing:"easeOutQuint"};exports.buildingAnimation=d;var S={bounceType:"easeOutElastic",bounceTime:750,growType:"easeInOutQuad",growTime:750,stagger:0};exports.entranceAnimation=S;var D={pixelDensity:.5,sceneOpacity:0,cacheDebounceTime:400,pickDistance:3};exports.identify=D;var y={interval:300,animationTime:250,animationType:"linear",tileMultiplier:1.5,axisAngleToleranceDeg:45,axisCheckDistancePx:12,boundsDead:!1,boundsAlive:!1,commercialBoundsDead:!1,commercialBoundsAlive:!1,boundsUnused:!1,commercialMargins:{visibleLeftRight:60,visibleTopBottom:60,appearLeftRight:70,appearTopBottom:70},lineLabelsHidePitchDeg:40,maxLabelLength:30};exports.labeling=y;var v={alwaysRerender:!1};exports.render=v;var b="en";exports.defaultLang=b;var z={mouseDelta:.65,macTouchDelta:.0018,animDuration:400,throttleDelay:100,mouseRotateDelta:2.5,mousePitchDelta:2.5,mobilePinchDelta:1,mobileTapDelta:10};exports.zoom=z;var w={duration:1300,maxSpeed:8,minSpeed:.02,nonLinearity:5};exports.inertia=w;var h={fov:60,near:1e3,far:Math.pow(2,34),minCalculationScreenHeight:1e3,hidePointObjectsAtPitch:30,viewportLimitRatio:2};exports.camera=h;var j={enabled:!0,url:"https://floors.api.2gis.ru",displayStyleZoom:17,wallHeight:800,islandHeight:400,wallMinBrightness:.8265,wallMaxBrightness:.95,viewportPadding:.2};exports.floors=j;var N={lightIntensity:.1};exports.fences=N;var T={fpsCaveat:10};exports.performanceCheck=T;var L=["Commercial_poi_custom","Commercial_poi_navi","Commercial_poi_default","Anchor","Transport_poi","High_zoom_poi","High_zoom_poi_navigator","Medium_zoom_poi","Medium_zoom_poi_navigator","Low_zoom_poi","Low_zoom_poi_navigator"];exports.branchPoiSublayers=L;var A=["Subway_exit","Subway_exit_on_floor"];exports.transportPoiSublayerMetroExit=A;var P=(0,e.__spreadArray)(["Transport_stop"],A);exports.transportPoiSublayers=P;var _=["Commercial_poi_default","Commercial_poi_custom","Commercial_poi_navi"];exports.commercialSublayers=_;var f=["s_personal_poi"];exports.personalSublayers=f;var C=["Landmark_poi","Landmark_point"];exports.landmarkPoiSublayers=C;var Z="Anchor";exports.floorsDefaultPoiSublayer=Z;var k=[96,84,72,60,48,36,24];exports.commercialRasterSizes=k;var G=[105,84,63,42,21];exports.landmarkRasterSizes=G;var U=["City_2gis_medium","City_2gis_big","Capital_2gis"];exports.cityNameSublayers=U;var O="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzBweCIgaGVpZ2h0PSI0OHB4IiB2aWV3Qm94PSIwIDAgMzAgNDgiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA1MS4yICg1NzUxOSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+PHRpdGxlPlBhZ2UgMSBDb3B5PC90aXRsZT48ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz48ZGVmcz48bGluZWFyR3JhZGllbnQgeDE9IjUwJSIgeTE9IjUwJSIgeDI9IjUwJSIgeTI9IjAlIiBpZD0ibGluZWFyR3JhZGllbnQtMSI+PHN0b3Agc3RvcC1jb2xvcj0iIzFCODlFRSIgb2Zmc2V0PSIwJSI+PC9zdG9wPjxzdG9wIHN0b3AtY29sb3I9IiMzMTk4RUMiIG9mZnNldD0iMTAwJSI+PC9zdG9wPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxnIGlkPSJSZWNvdmVyeS0wMSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTgzOS4wMDAwMDAsIC00MjUuMDAwMDAwKSI+PGcgaWQ9IlBhZ2UtMS1Db3B5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg4MzkuMDAwMDAwLCA0MjUuMDAwMDAwKSI+PGVsbGlwc2UgaWQ9Ik92YWwtMyIgZmlsbD0iIzAwMDAwMCIgb3BhY2l0eT0iMC4wMzYzODA1OTciIGN4PSIxNSIgY3k9IjQ1LjUiIHJ4PSIzIiByeT0iMS41Ij48L2VsbGlwc2U+PGVsbGlwc2UgaWQ9Ik92YWwtMy1Db3B5IiBmaWxsPSIjMDAwMDAwIiBvcGFjaXR5PSIwLjAzNjM4MDU5NyIgY3g9IjE1IiBjeT0iNDUuNSIgcng9IjQuNSIgcnk9IjIuNSI+PC9lbGxpcHNlPjxwYXRoIGQ9Ik0xNSw0NS44ODM2MzUzIEwxNS44ODIzNTI5LDQ1Ljg4MzYzNTMgQzE1Ljg4MjM1MjksMjkuMjE3NzUyOSAyMC43NzY3NjQ3LDIzLjc5NzQ1ODggMjcuOTg3MzUyOSwyMy43OTc0NTg4IEwyOC4zMjk3MDU5LDIzLjc5NzQ1ODggQzI5LjA3Nzk0MTIsMjEuNTkwNjk0MSAzMCwxNy45OTE1NzY1IDMwLDE1LjAwMDQgQzMwLDcuMTQzOTI5NDEgMjMuNzY3OTQxMiwwLjAwMDQgMTUsMC4wMDA0IEM2LjIzMjA1ODgyLDAuMDAwNCAwLDcuMTQzOTI5NDEgMCwxNS4wMDA0IEMwLDE3Ljk5MTU3NjUgMC45MjIwNTg4MjQsMjEuNTkwNjk0MSAxLjY3MDI5NDEyLDIzLjc5NzQ1ODggTDIuMDEyNjQ3MDYsMjMuNzk3NDU4OCBDOS4yMjQxMTc2NSwyMy43OTc0NTg4IDE0LjExNzY0NzEsMjkuMjE3NzUyOSAxNC4xMTc2NDcxLDQ1Ljg4MzYzNTMgTDE1LDQ1Ljg4MzYzNTMgWiIgaWQ9IkZpbGwtMSIgZmlsbD0idXJsKCNsaW5lYXJHcmFkaWVudC0xKSI+PC9wYXRoPjwvZz48L2c+PC9nPjwvc3ZnPg==";exports.defaultMarkerIcon=O;var Q=[15,43];exports.defaultMarkerAnchor=Q;
},{"tslib":"vCxL"}],"BzQH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setMatrixArrayType=o,exports.toRadian=s,exports.equals=n,exports.RANDOM=exports.ARRAY_TYPE=exports.EPSILON=void 0;const t=1e-6;exports.EPSILON=t;let e="undefined"!=typeof Float64Array?Float64Array:Array;exports.ARRAY_TYPE=e;const r=Math.random;function o(t){exports.ARRAY_TYPE=e=t}exports.RANDOM=r;const a=Math.PI/180;function s(t){return t*a}function n(e,r){return Math.abs(e-r)<=t*Math.max(1,Math.abs(e),Math.abs(r))}
},{}],"QsKn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=n,exports.clone=o,exports.fromValues=s,exports.copy=u,exports.set=a,exports.add=c,exports.subtract=i,exports.multiply=p,exports.divide=f,exports.ceil=x,exports.floor=l,exports.min=M,exports.max=h,exports.round=d,exports.scale=v,exports.scaleAndAdd=m,exports.distance=b,exports.squaredDistance=q,exports.length=y,exports.squaredLength=O,exports.negate=P,exports.inverse=g,exports.normalize=A,exports.dot=w,exports.cross=E,exports.lerp=j,exports.random=R,exports.transformMat2=_,exports.transformMat2d=D,exports.transformMat3=Y,exports.transformMat4=L,exports.str=k,exports.exactEquals=I,exports.equals=N,exports.forEach=exports.sqrLen=exports.sqrDist=exports.dist=exports.div=exports.mul=exports.sub=exports.len=void 0;var t=e(require("./common"));function r(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(r=function(t){return t?n:e})(t)}function e(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=r(e);if(n&&n.has(t))return n.get(t);var o={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in t)if("default"!==u&&Object.prototype.hasOwnProperty.call(t,u)){var a=s?Object.getOwnPropertyDescriptor(t,u):null;a&&(a.get||a.set)?Object.defineProperty(o,u,a):o[u]=t[u]}return o.default=t,n&&n.set(t,o),o}function n(){let r=new t.ARRAY_TYPE(2);return r[0]=0,r[1]=0,r}function o(r){let e=new t.ARRAY_TYPE(2);return e[0]=r[0],e[1]=r[1],e}function s(r,e){let n=new t.ARRAY_TYPE(2);return n[0]=r,n[1]=e,n}function u(t,r){return t[0]=r[0],t[1]=r[1],t}function a(t,r,e){return t[0]=r,t[1]=e,t}function c(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t}function i(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t}function p(t,r,e){return t[0]=r[0]*e[0],t[1]=r[1]*e[1],t}function f(t,r,e){return t[0]=r[0]/e[0],t[1]=r[1]/e[1],t}function x(t,r){return t[0]=Math.ceil(r[0]),t[1]=Math.ceil(r[1]),t}function l(t,r){return t[0]=Math.floor(r[0]),t[1]=Math.floor(r[1]),t}function M(t,r,e){return t[0]=Math.min(r[0],e[0]),t[1]=Math.min(r[1],e[1]),t}function h(t,r,e){return t[0]=Math.max(r[0],e[0]),t[1]=Math.max(r[1],e[1]),t}function d(t,r){return t[0]=Math.round(r[0]),t[1]=Math.round(r[1]),t}function v(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t}function m(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t}function b(t,r){var e=r[0]-t[0],n=r[1]-t[1];return Math.sqrt(e*e+n*n)}function q(t,r){var e=r[0]-t[0],n=r[1]-t[1];return e*e+n*n}function y(t){var r=t[0],e=t[1];return Math.sqrt(r*r+e*e)}function O(t){var r=t[0],e=t[1];return r*r+e*e}function P(t,r){return t[0]=-r[0],t[1]=-r[1],t}function g(t,r){return t[0]=1/r[0],t[1]=1/r[1],t}function A(t,r){var e=r[0],n=r[1],o=e*e+n*n;return o>0&&(o=1/Math.sqrt(o),t[0]=r[0]*o,t[1]=r[1]*o),t}function w(t,r){return t[0]*r[0]+t[1]*r[1]}function E(t,r,e){var n=r[0]*e[1]-r[1]*e[0];return t[0]=t[1]=0,t[2]=n,t}function j(t,r,e,n){var o=r[0],s=r[1];return t[0]=o+n*(e[0]-o),t[1]=s+n*(e[1]-s),t}function R(r,e){e=e||1;var n=2*t.RANDOM()*Math.PI;return r[0]=Math.cos(n)*e,r[1]=Math.sin(n)*e,r}function _(t,r,e){var n=r[0],o=r[1];return t[0]=e[0]*n+e[2]*o,t[1]=e[1]*n+e[3]*o,t}function D(t,r,e){var n=r[0],o=r[1];return t[0]=e[0]*n+e[2]*o+e[4],t[1]=e[1]*n+e[3]*o+e[5],t}function Y(t,r,e){var n=r[0],o=r[1];return t[0]=e[0]*n+e[3]*o+e[6],t[1]=e[1]*n+e[4]*o+e[7],t}function L(t,r,e){let n=r[0],o=r[1];return t[0]=e[0]*n+e[4]*o+e[12],t[1]=e[1]*n+e[5]*o+e[13],t}function k(t){return"vec2("+t[0]+", "+t[1]+")"}function I(t,r){return t[0]===r[0]&&t[1]===r[1]}function N(r,e){let n=r[0],o=r[1],s=e[0],u=e[1];return Math.abs(n-s)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(o-u)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))}const T=y;exports.len=T;const W=i;exports.sub=W;const S=p;exports.mul=S;const z=f;exports.div=z;const V=b;exports.dist=V;const B=q;exports.sqrDist=B;const C=O;exports.sqrLen=C;const F=function(){let t=n();return function(r,e,n,o,s,u){let a,c;for(e||(e=2),n||(n=0),c=o?Math.min(o*e+n,r.length):r.length,a=n;a<c;a+=e)t[0]=r[a],t[1]=r[a+1],s(t,t,u),r[a]=t[0],r[a+1]=t[1];return r}}();exports.forEach=F;
},{"./common":"BzQH"}],"QVok":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.encode=exports.decode=void 0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r="undefined"==typeof Uint8Array?[]:new Uint8Array(256),t=0;t<e.length;t++)r[e.charCodeAt(t)]=t;var n=function(r){var t,n=new Uint8Array(r),o=n.length,a="";for(t=0;t<o;t+=3)a+=e[n[t]>>2],a+=e[(3&n[t])<<4|n[t+1]>>4],a+=e[(15&n[t+1])<<2|n[t+2]>>6],a+=e[63&n[t+2]];return o%3==2?a=a.substring(0,a.length-1)+"=":o%3==1&&(a=a.substring(0,a.length-2)+"=="),a};exports.encode=n;var o=function(e){var t,n,o,a,d,c=.75*e.length,h=e.length,i=0;"="===e[e.length-1]&&(c--,"="===e[e.length-2]&&c--);var s=new ArrayBuffer(c),u=new Uint8Array(s);for(t=0;t<h;t+=4)n=r[e.charCodeAt(t)],o=r[e.charCodeAt(t+1)],a=r[e.charCodeAt(t+2)],d=r[e.charCodeAt(t+3)],u[i++]=n<<2|o>>4,u[i++]=(15&o)<<4|a>>2,u[i++]=(3&a)<<6|63&d;return s};exports.decode=o;
},{}],"JgNJ":[function(require,module,exports) {
exports.read=function(a,o,t,r,h){var M,p,w=8*h-r-1,f=(1<<w)-1,e=f>>1,i=-7,N=t?h-1:0,n=t?-1:1,s=a[o+N];for(N+=n,M=s&(1<<-i)-1,s>>=-i,i+=w;i>0;M=256*M+a[o+N],N+=n,i-=8);for(p=M&(1<<-i)-1,M>>=-i,i+=r;i>0;p=256*p+a[o+N],N+=n,i-=8);if(0===M)M=1-e;else{if(M===f)return p?NaN:1/0*(s?-1:1);p+=Math.pow(2,r),M-=e}return(s?-1:1)*p*Math.pow(2,M-r)},exports.write=function(a,o,t,r,h,M){var p,w,f,e=8*M-h-1,i=(1<<e)-1,N=i>>1,n=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,s=r?0:M-1,u=r?1:-1,l=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(w=isNaN(o)?1:0,p=i):(p=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-p))<1&&(p--,f*=2),(o+=p+N>=1?n/f:n*Math.pow(2,1-N))*f>=2&&(p++,f/=2),p+N>=i?(w=0,p=i):p+N>=1?(w=(o*f-1)*Math.pow(2,h),p+=N):(w=o*Math.pow(2,N-1)*Math.pow(2,h),p=0));h>=8;a[t+s]=255&w,s+=u,w/=256,h-=8);for(p=p<<h|w,e+=h;e>0;a[t+s]=255&p,s+=u,p/=256,e-=8);a[t+s-u]|=128*l};
},{}],"QftS":[function(require,module,exports) {
"use strict";module.exports=i;var t=require("ieee754");function i(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}i.Varint=0,i.Fixed64=1,i.Bytes=2,i.Fixed32=5;var e=4294967296,r=1/e,s=12,n="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function o(t,i,e){var r,s,n=e.buf;if(r=(112&(s=n[e.pos++]))>>4,s<128)return a(t,r,i);if(r|=(127&(s=n[e.pos++]))<<3,s<128)return a(t,r,i);if(r|=(127&(s=n[e.pos++]))<<10,s<128)return a(t,r,i);if(r|=(127&(s=n[e.pos++]))<<17,s<128)return a(t,r,i);if(r|=(127&(s=n[e.pos++]))<<24,s<128)return a(t,r,i);if(r|=(1&(s=n[e.pos++]))<<31,s<128)return a(t,r,i);throw new Error("Expected varint not more than 10 bytes")}function h(t){return t.type===i.Bytes?t.readVarint()+t.pos:t.pos+1}function a(t,i,e){return e?4294967296*i+(t>>>0):4294967296*(i>>>0)+(t>>>0)}function u(t,i){var e,r;if(t>=0?(e=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(e=~(-t%4294967296))?e=e+1|0:(e=0,r=r+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");i.realloc(10),f(e,r,i),d(r,i)}function f(t,i,e){e.buf[e.pos++]=127&t|128,t>>>=7,e.buf[e.pos++]=127&t|128,t>>>=7,e.buf[e.pos++]=127&t|128,t>>>=7,e.buf[e.pos++]=127&t|128,t>>>=7,e.buf[e.pos]=127&t}function d(t,i){var e=(7&t)<<4;i.buf[i.pos++]|=e|((t>>>=3)?128:0),t&&(i.buf[i.pos++]=127&t|((t>>>=7)?128:0),t&&(i.buf[i.pos++]=127&t|((t>>>=7)?128:0),t&&(i.buf[i.pos++]=127&t|((t>>>=7)?128:0),t&&(i.buf[i.pos++]=127&t|((t>>>=7)?128:0),t&&(i.buf[i.pos++]=127&t)))))}function p(t,i,e){var r=i<=16383?1:i<=2097151?2:i<=268435455?3:Math.floor(Math.log(i)/(7*Math.LN2));e.realloc(r);for(var s=e.pos-1;s>=t;s--)e.buf[s+r]=e.buf[s]}function l(t,i){for(var e=0;e<t.length;e++)i.writeVarint(t[e])}function c(t,i){for(var e=0;e<t.length;e++)i.writeSVarint(t[e])}function w(t,i){for(var e=0;e<t.length;e++)i.writeFloat(t[e])}function F(t,i){for(var e=0;e<t.length;e++)i.writeDouble(t[e])}function g(t,i){for(var e=0;e<t.length;e++)i.writeBoolean(t[e])}function b(t,i){for(var e=0;e<t.length;e++)i.writeFixed32(t[e])}function x(t,i){for(var e=0;e<t.length;e++)i.writeSFixed32(t[e])}function v(t,i){for(var e=0;e<t.length;e++)i.writeFixed64(t[e])}function y(t,i){for(var e=0;e<t.length;e++)i.writeSFixed64(t[e])}function V(t,i){return(t[i]|t[i+1]<<8|t[i+2]<<16)+16777216*t[i+3]}function S(t,i,e){t[e]=i,t[e+1]=i>>>8,t[e+2]=i>>>16,t[e+3]=i>>>24}function B(t,i){return(t[i]|t[i+1]<<8|t[i+2]<<16)+(t[i+3]<<24)}function k(t,i,e){for(var r="",s=i;s<e;){var n,o,h,a=t[s],u=null,f=a>239?4:a>223?3:a>191?2:1;if(s+f>e)break;1===f?a<128&&(u=a):2===f?128==(192&(n=t[s+1]))&&(u=(31&a)<<6|63&n)<=127&&(u=null):3===f?(n=t[s+1],o=t[s+2],128==(192&n)&&128==(192&o)&&((u=(15&a)<<12|(63&n)<<6|63&o)<=2047||u>=55296&&u<=57343)&&(u=null)):4===f&&(n=t[s+1],o=t[s+2],h=t[s+3],128==(192&n)&&128==(192&o)&&128==(192&h)&&((u=(15&a)<<18|(63&n)<<12|(63&o)<<6|63&h)<=65535||u>=1114112)&&(u=null)),null===u?(u=65533,f=1):u>65535&&(u-=65536,r+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),r+=String.fromCharCode(u),s+=f}return r}function M(t,i,e){return n.decode(t.subarray(i,e))}function P(t,i,e){for(var r,s,n=0;n<i.length;n++){if((r=i.charCodeAt(n))>55295&&r<57344){if(!s){r>56319||n+1===i.length?(t[e++]=239,t[e++]=191,t[e++]=189):s=r;continue}if(r<56320){t[e++]=239,t[e++]=191,t[e++]=189,s=r;continue}r=s-55296<<10|r-56320|65536,s=null}else s&&(t[e++]=239,t[e++]=191,t[e++]=189,s=null);r<128?t[e++]=r:(r<2048?t[e++]=r>>6|192:(r<65536?t[e++]=r>>12|224:(t[e++]=r>>18|240,t[e++]=r>>12&63|128),t[e++]=r>>6&63|128),t[e++]=63&r|128)}return e}i.prototype={destroy:function(){this.buf=null},readFields:function(t,i,e){for(e=e||this.length;this.pos<e;){var r=this.readVarint(),s=r>>3,n=this.pos;this.type=7&r,t(s,i,this),this.pos===n&&this.skip(r)}return i},readMessage:function(t,i){return this.readFields(t,i,this.readVarint()+this.pos)},readFixed32:function(){var t=V(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=B(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=V(this.buf,this.pos)+V(this.buf,this.pos+4)*e;return this.pos+=8,t},readSFixed64:function(){var t=V(this.buf,this.pos)+B(this.buf,this.pos+4)*e;return this.pos+=8,t},readFloat:function(){var i=t.read(this.buf,this.pos,!0,23,4);return this.pos+=4,i},readDouble:function(){var i=t.read(this.buf,this.pos,!0,52,8);return this.pos+=8,i},readVarint:function(t){var i,e,r=this.buf;return i=127&(e=r[this.pos++]),e<128?i:(i|=(127&(e=r[this.pos++]))<<7,e<128?i:(i|=(127&(e=r[this.pos++]))<<14,e<128?i:(i|=(127&(e=r[this.pos++]))<<21,e<128?i:o(i|=(15&(e=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,i=this.pos;return this.pos=t,t-i>=s&&n?M(this.buf,i,t):k(this.buf,i,t)},readBytes:function(){var t=this.readVarint()+this.pos,i=this.buf.subarray(this.pos,t);return this.pos=t,i},readPackedVarint:function(t,e){if(this.type!==i.Bytes)return t.push(this.readVarint(e));var r=h(this);for(t=t||[];this.pos<r;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==i.Bytes)return t.push(this.readSVarint());var e=h(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==i.Bytes)return t.push(this.readBoolean());var e=h(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==i.Bytes)return t.push(this.readFloat());var e=h(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==i.Bytes)return t.push(this.readDouble());var e=h(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==i.Bytes)return t.push(this.readFixed32());var e=h(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==i.Bytes)return t.push(this.readSFixed32());var e=h(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==i.Bytes)return t.push(this.readFixed64());var e=h(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==i.Bytes)return t.push(this.readSFixed64());var e=h(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===i.Varint)for(;this.buf[this.pos++]>127;);else if(e===i.Bytes)this.pos=this.readVarint()+this.pos;else if(e===i.Fixed32)this.pos+=4;else{if(e!==i.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,i){this.writeVarint(t<<3|i)},realloc:function(t){for(var i=this.length||16;i<this.pos+t;)i*=2;if(i!==this.length){var e=new Uint8Array(i);e.set(this.buf),this.buf=e,this.length=i}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),S(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),S(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),S(this.buf,-1&t,this.pos),S(this.buf,Math.floor(t*r),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),S(this.buf,-1&t,this.pos),S(this.buf,Math.floor(t*r),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?u(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var i=this.pos;this.pos=P(this.buf,t,this.pos);var e=this.pos-i;e>=128&&p(i,e,this),this.pos=i-1,this.writeVarint(e),this.pos+=e},writeFloat:function(i){this.realloc(4),t.write(this.buf,i,this.pos,!0,23,4),this.pos+=4},writeDouble:function(i){this.realloc(8),t.write(this.buf,i,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var i=t.length;this.writeVarint(i),this.realloc(i);for(var e=0;e<i;e++)this.buf[this.pos++]=t[e]},writeRawMessage:function(t,i){this.pos++;var e=this.pos;t(i,this);var r=this.pos-e;r>=128&&p(e,r,this),this.pos=e-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,r){this.writeTag(t,i.Bytes),this.writeRawMessage(e,r)},writePackedVarint:function(t,i){i.length&&this.writeMessage(t,l,i)},writePackedSVarint:function(t,i){i.length&&this.writeMessage(t,c,i)},writePackedBoolean:function(t,i){i.length&&this.writeMessage(t,g,i)},writePackedFloat:function(t,i){i.length&&this.writeMessage(t,w,i)},writePackedDouble:function(t,i){i.length&&this.writeMessage(t,F,i)},writePackedFixed32:function(t,i){i.length&&this.writeMessage(t,b,i)},writePackedSFixed32:function(t,i){i.length&&this.writeMessage(t,x,i)},writePackedFixed64:function(t,i){i.length&&this.writeMessage(t,v,i)},writePackedSFixed64:function(t,i){i.length&&this.writeMessage(t,y,i)},writeBytesField:function(t,e){this.writeTag(t,i.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,i.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,i.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,i.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,i){this.writeVarintField(t,Boolean(i))}};
},{"ieee754":"JgNJ"}],"LPv5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=n,exports.clone=o,exports.length=s,exports.fromValues=u,exports.copy=a,exports.set=c,exports.add=i,exports.subtract=p,exports.multiply=f,exports.divide=x,exports.ceil=l,exports.floor=h,exports.min=M,exports.max=d,exports.round=m,exports.scale=b,exports.scaleAndAdd=v,exports.distance=O,exports.squaredDistance=P,exports.squaredLength=q,exports.negate=y,exports.inverse=g,exports.normalize=A,exports.dot=E,exports.cross=w,exports.lerp=R,exports.hermite=j,exports.bezier=D,exports.random=Y,exports.transformMat4=_,exports.transformMat3=L,exports.transformQuat=I,exports.rotateX=N,exports.rotateY=k,exports.rotateZ=S,exports.angle=T,exports.str=W,exports.exactEquals=z,exports.equals=Q,exports.forEach=exports.sqrLen=exports.len=exports.sqrDist=exports.dist=exports.div=exports.mul=exports.sub=void 0;var t=e(require("./common"));function r(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(r=function(t){return t?n:e})(t)}function e(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=r(e);if(n&&n.has(t))return n.get(t);var o={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in t)if("default"!==u&&Object.prototype.hasOwnProperty.call(t,u)){var a=s?Object.getOwnPropertyDescriptor(t,u):null;a&&(a.get||a.set)?Object.defineProperty(o,u,a):o[u]=t[u]}return o.default=t,n&&n.set(t,o),o}function n(){let r=new t.ARRAY_TYPE(3);return r[0]=0,r[1]=0,r[2]=0,r}function o(r){var e=new t.ARRAY_TYPE(3);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e}function s(t){let r=t[0],e=t[1],n=t[2];return Math.sqrt(r*r+e*e+n*n)}function u(r,e,n){let o=new t.ARRAY_TYPE(3);return o[0]=r,o[1]=e,o[2]=n,o}function a(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t}function c(t,r,e,n){return t[0]=r,t[1]=e,t[2]=n,t}function i(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t}function p(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t}function f(t,r,e){return t[0]=r[0]*e[0],t[1]=r[1]*e[1],t[2]=r[2]*e[2],t}function x(t,r,e){return t[0]=r[0]/e[0],t[1]=r[1]/e[1],t[2]=r[2]/e[2],t}function l(t,r){return t[0]=Math.ceil(r[0]),t[1]=Math.ceil(r[1]),t[2]=Math.ceil(r[2]),t}function h(t,r){return t[0]=Math.floor(r[0]),t[1]=Math.floor(r[1]),t[2]=Math.floor(r[2]),t}function M(t,r,e){return t[0]=Math.min(r[0],e[0]),t[1]=Math.min(r[1],e[1]),t[2]=Math.min(r[2],e[2]),t}function d(t,r,e){return t[0]=Math.max(r[0],e[0]),t[1]=Math.max(r[1],e[1]),t[2]=Math.max(r[2],e[2]),t}function m(t,r){return t[0]=Math.round(r[0]),t[1]=Math.round(r[1]),t[2]=Math.round(r[2]),t}function b(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t}function v(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t[2]=r[2]+e[2]*n,t}function O(t,r){let e=r[0]-t[0],n=r[1]-t[1],o=r[2]-t[2];return Math.sqrt(e*e+n*n+o*o)}function P(t,r){let e=r[0]-t[0],n=r[1]-t[1],o=r[2]-t[2];return e*e+n*n+o*o}function q(t){let r=t[0],e=t[1],n=t[2];return r*r+e*e+n*n}function y(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t}function g(t,r){return t[0]=1/r[0],t[1]=1/r[1],t[2]=1/r[2],t}function A(t,r){let e=r[0],n=r[1],o=r[2],s=e*e+n*n+o*o;return s>0&&(s=1/Math.sqrt(s),t[0]=r[0]*s,t[1]=r[1]*s,t[2]=r[2]*s),t}function E(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]}function w(t,r,e){let n=r[0],o=r[1],s=r[2],u=e[0],a=e[1],c=e[2];return t[0]=o*c-s*a,t[1]=s*u-n*c,t[2]=n*a-o*u,t}function R(t,r,e,n){let o=r[0],s=r[1],u=r[2];return t[0]=o+n*(e[0]-o),t[1]=s+n*(e[1]-s),t[2]=u+n*(e[2]-u),t}function j(t,r,e,n,o,s){let u=s*s,a=u*(2*s-3)+1,c=u*(s-2)+s,i=u*(s-1),p=u*(3-2*s);return t[0]=r[0]*a+e[0]*c+n[0]*i+o[0]*p,t[1]=r[1]*a+e[1]*c+n[1]*i+o[1]*p,t[2]=r[2]*a+e[2]*c+n[2]*i+o[2]*p,t}function D(t,r,e,n,o,s){let u=1-s,a=u*u,c=s*s,i=a*u,p=3*s*a,f=3*c*u,x=c*s;return t[0]=r[0]*i+e[0]*p+n[0]*f+o[0]*x,t[1]=r[1]*i+e[1]*p+n[1]*f+o[1]*x,t[2]=r[2]*i+e[2]*p+n[2]*f+o[2]*x,t}function Y(r,e){e=e||1;let n=2*t.RANDOM()*Math.PI,o=2*t.RANDOM()-1,s=Math.sqrt(1-o*o)*e;return r[0]=Math.cos(n)*s,r[1]=Math.sin(n)*s,r[2]=o*e,r}function _(t,r,e){let n=r[0],o=r[1],s=r[2],u=e[3]*n+e[7]*o+e[11]*s+e[15];return u=u||1,t[0]=(e[0]*n+e[4]*o+e[8]*s+e[12])/u,t[1]=(e[1]*n+e[5]*o+e[9]*s+e[13])/u,t[2]=(e[2]*n+e[6]*o+e[10]*s+e[14])/u,t}function L(t,r,e){let n=r[0],o=r[1],s=r[2];return t[0]=n*e[0]+o*e[3]+s*e[6],t[1]=n*e[1]+o*e[4]+s*e[7],t[2]=n*e[2]+o*e[5]+s*e[8],t}function I(t,r,e){let n=r[0],o=r[1],s=r[2],u=e[0],a=e[1],c=e[2],i=e[3],p=i*n+a*s-c*o,f=i*o+c*n-u*s,x=i*s+u*o-a*n,l=-u*n-a*o-c*s;return t[0]=p*i+l*-u+f*-c-x*-a,t[1]=f*i+l*-a+x*-u-p*-c,t[2]=x*i+l*-c+p*-a-f*-u,t}function N(t,r,e,n){let o=[],s=[];return o[0]=r[0]-e[0],o[1]=r[1]-e[1],o[2]=r[2]-e[2],s[0]=o[0],s[1]=o[1]*Math.cos(n)-o[2]*Math.sin(n),s[2]=o[1]*Math.sin(n)+o[2]*Math.cos(n),t[0]=s[0]+e[0],t[1]=s[1]+e[1],t[2]=s[2]+e[2],t}function k(t,r,e,n){let o=[],s=[];return o[0]=r[0]-e[0],o[1]=r[1]-e[1],o[2]=r[2]-e[2],s[0]=o[2]*Math.sin(n)+o[0]*Math.cos(n),s[1]=o[1],s[2]=o[2]*Math.cos(n)-o[0]*Math.sin(n),t[0]=s[0]+e[0],t[1]=s[1]+e[1],t[2]=s[2]+e[2],t}function S(t,r,e,n){let o=[],s=[];return o[0]=r[0]-e[0],o[1]=r[1]-e[1],o[2]=r[2]-e[2],s[0]=o[0]*Math.cos(n)-o[1]*Math.sin(n),s[1]=o[0]*Math.sin(n)+o[1]*Math.cos(n),s[2]=o[2],t[0]=s[0]+e[0],t[1]=s[1]+e[1],t[2]=s[2]+e[2],t}function T(t,r){let e=u(t[0],t[1],t[2]),n=u(r[0],r[1],r[2]);A(e,e),A(n,n);let o=E(e,n);return o>1?0:o<-1?Math.PI:Math.acos(o)}function W(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function z(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]}function Q(r,e){let n=r[0],o=r[1],s=r[2],u=e[0],a=e[1],c=e[2];return Math.abs(n-u)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(o-a)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(a))&&Math.abs(s-c)<=t.EPSILON*Math.max(1,Math.abs(s),Math.abs(c))}const V=p;exports.sub=V;const X=f;exports.mul=X;const Z=x;exports.div=Z;const B=O;exports.dist=B;const C=P;exports.sqrDist=C;const F=s;exports.len=F;const G=q;exports.sqrLen=G;const H=function(){let t=n();return function(r,e,n,o,s,u){let a,c;for(e||(e=3),n||(n=0),c=o?Math.min(o*e+n,r.length):r.length,a=n;a<c;a+=e)t[0]=r[a],t[1]=r[a+1],t[2]=r[a+2],s(t,t,u),r[a]=t[0],r[a+1]=t[1],r[a+2]=t[2];return r}}();exports.forEach=H;
},{"./common":"BzQH"}],"SHWl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=e,exports.clone=n,exports.copy=o,exports.fromValues=s,exports.set=h,exports.identity=u,exports.transpose=M,exports.invert=i,exports.adjoint=p,exports.determinant=c,exports.multiply=f,exports.translate=l,exports.scale=x,exports.rotate=b,exports.rotateX=m,exports.rotateY=P,exports.rotateZ=O,exports.fromTranslation=w,exports.fromScaling=S,exports.fromRotation=E,exports.fromXRotation=I,exports.fromYRotation=d,exports.fromZRotation=L,exports.fromRotationTranslation=N,exports.getTranslation=q,exports.getScaling=g,exports.getRotation=y,exports.fromRotationTranslationScale=R,exports.fromRotationTranslationScaleOrigin=v,exports.fromQuat=T,exports.frustum=A,exports.perspective=j,exports.perspectiveFromFieldOfView=Y,exports.ortho=_,exports.lookAt=D,exports.targetTo=k,exports.str=F,exports.frob=V,exports.add=W,exports.subtract=X,exports.multiplyScalar=Z,exports.multiplyScalarAndAdd=Q,exports.exactEquals=z,exports.equals=B,exports.fromTranslationScale=H,exports.vpFromTargetEyeView=J,exports.sub=exports.mul=void 0;var t=r(require("./common"));function a(t){if("function"!=typeof WeakMap)return null;var r=new WeakMap,e=new WeakMap;return(a=function(t){return t?e:r})(t)}function r(t,r){if(!r&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=a(r);if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if("default"!==s&&Object.prototype.hasOwnProperty.call(t,s)){var h=o?Object.getOwnPropertyDescriptor(t,s):null;h&&(h.get||h.set)?Object.defineProperty(n,s,h):n[s]=t[s]}return n.default=t,e&&e.set(t,n),n}function e(){let a=new t.ARRAY_TYPE(16);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function n(a){let r=new t.ARRAY_TYPE(16);return r[0]=a[0],r[1]=a[1],r[2]=a[2],r[3]=a[3],r[4]=a[4],r[5]=a[5],r[6]=a[6],r[7]=a[7],r[8]=a[8],r[9]=a[9],r[10]=a[10],r[11]=a[11],r[12]=a[12],r[13]=a[13],r[14]=a[14],r[15]=a[15],r}function o(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t}function s(a,r,e,n,o,s,h,u,M,i,p,c,f,l,x,b){let m=new t.ARRAY_TYPE(16);return m[0]=a,m[1]=r,m[2]=e,m[3]=n,m[4]=o,m[5]=s,m[6]=h,m[7]=u,m[8]=M,m[9]=i,m[10]=p,m[11]=c,m[12]=f,m[13]=l,m[14]=x,m[15]=b,m}function h(t,a,r,e,n,o,s,h,u,M,i,p,c,f,l,x,b){return t[0]=a,t[1]=r,t[2]=e,t[3]=n,t[4]=o,t[5]=s,t[6]=h,t[7]=u,t[8]=M,t[9]=i,t[10]=p,t[11]=c,t[12]=f,t[13]=l,t[14]=x,t[15]=b,t}function u(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function M(t,a){if(t===a){let r=a[1],e=a[2],n=a[3],o=a[6],s=a[7],h=a[11];t[1]=a[4],t[2]=a[8],t[3]=a[12],t[4]=r,t[6]=a[9],t[7]=a[13],t[8]=e,t[9]=o,t[11]=a[14],t[12]=n,t[13]=s,t[14]=h}else t[0]=a[0],t[1]=a[4],t[2]=a[8],t[3]=a[12],t[4]=a[1],t[5]=a[5],t[6]=a[9],t[7]=a[13],t[8]=a[2],t[9]=a[6],t[10]=a[10],t[11]=a[14],t[12]=a[3],t[13]=a[7],t[14]=a[11],t[15]=a[15];return t}function i(t,a){let r=a[0],e=a[1],n=a[2],o=a[3],s=a[4],h=a[5],u=a[6],M=a[7],i=a[8],p=a[9],c=a[10],f=a[11],l=a[12],x=a[13],b=a[14],m=a[15],P=r*h-e*s,O=r*u-n*s,w=r*M-o*s,S=e*u-n*h,E=e*M-o*h,I=n*M-o*u,d=i*x-p*l,L=i*b-c*l,N=i*m-f*l,q=p*b-c*x,g=p*m-f*x,y=c*m-f*b,R=P*y-O*g+w*q+S*N-E*L+I*d;return R?(R=1/R,t[0]=(h*y-u*g+M*q)*R,t[1]=(n*g-e*y-o*q)*R,t[2]=(x*I-b*E+m*S)*R,t[3]=(c*E-p*I-f*S)*R,t[4]=(u*N-s*y-M*L)*R,t[5]=(r*y-n*N+o*L)*R,t[6]=(b*w-l*I-m*O)*R,t[7]=(i*I-c*w+f*O)*R,t[8]=(s*g-h*N+M*d)*R,t[9]=(e*N-r*g-o*d)*R,t[10]=(l*E-x*w+m*P)*R,t[11]=(p*w-i*E-f*P)*R,t[12]=(h*L-s*q-u*d)*R,t[13]=(r*q-e*L+n*d)*R,t[14]=(x*O-l*S-b*P)*R,t[15]=(i*S-p*O+c*P)*R,t):null}function p(t,a){let r=a[0],e=a[1],n=a[2],o=a[3],s=a[4],h=a[5],u=a[6],M=a[7],i=a[8],p=a[9],c=a[10],f=a[11],l=a[12],x=a[13],b=a[14],m=a[15];return t[0]=h*(c*m-f*b)-p*(u*m-M*b)+x*(u*f-M*c),t[1]=-(e*(c*m-f*b)-p*(n*m-o*b)+x*(n*f-o*c)),t[2]=e*(u*m-M*b)-h*(n*m-o*b)+x*(n*M-o*u),t[3]=-(e*(u*f-M*c)-h*(n*f-o*c)+p*(n*M-o*u)),t[4]=-(s*(c*m-f*b)-i*(u*m-M*b)+l*(u*f-M*c)),t[5]=r*(c*m-f*b)-i*(n*m-o*b)+l*(n*f-o*c),t[6]=-(r*(u*m-M*b)-s*(n*m-o*b)+l*(n*M-o*u)),t[7]=r*(u*f-M*c)-s*(n*f-o*c)+i*(n*M-o*u),t[8]=s*(p*m-f*x)-i*(h*m-M*x)+l*(h*f-M*p),t[9]=-(r*(p*m-f*x)-i*(e*m-o*x)+l*(e*f-o*p)),t[10]=r*(h*m-M*x)-s*(e*m-o*x)+l*(e*M-o*h),t[11]=-(r*(h*f-M*p)-s*(e*f-o*p)+i*(e*M-o*h)),t[12]=-(s*(p*b-c*x)-i*(h*b-u*x)+l*(h*c-u*p)),t[13]=r*(p*b-c*x)-i*(e*b-n*x)+l*(e*c-n*p),t[14]=-(r*(h*b-u*x)-s*(e*b-n*x)+l*(e*u-n*h)),t[15]=r*(h*c-u*p)-s*(e*c-n*p)+i*(e*u-n*h),t}function c(t){let a=t[0],r=t[1],e=t[2],n=t[3],o=t[4],s=t[5],h=t[6],u=t[7],M=t[8],i=t[9],p=t[10],c=t[11],f=t[12],l=t[13],x=t[14],b=t[15];return(a*s-r*o)*(p*b-c*x)-(a*h-e*o)*(i*b-c*l)+(a*u-n*o)*(i*x-p*l)+(r*h-e*s)*(M*b-c*f)-(r*u-n*s)*(M*x-p*f)+(e*u-n*h)*(M*l-i*f)}function f(t,a,r){let e=a[0],n=a[1],o=a[2],s=a[3],h=a[4],u=a[5],M=a[6],i=a[7],p=a[8],c=a[9],f=a[10],l=a[11],x=a[12],b=a[13],m=a[14],P=a[15],O=r[0],w=r[1],S=r[2],E=r[3];return t[0]=O*e+w*h+S*p+E*x,t[1]=O*n+w*u+S*c+E*b,t[2]=O*o+w*M+S*f+E*m,t[3]=O*s+w*i+S*l+E*P,O=r[4],w=r[5],S=r[6],E=r[7],t[4]=O*e+w*h+S*p+E*x,t[5]=O*n+w*u+S*c+E*b,t[6]=O*o+w*M+S*f+E*m,t[7]=O*s+w*i+S*l+E*P,O=r[8],w=r[9],S=r[10],E=r[11],t[8]=O*e+w*h+S*p+E*x,t[9]=O*n+w*u+S*c+E*b,t[10]=O*o+w*M+S*f+E*m,t[11]=O*s+w*i+S*l+E*P,O=r[12],w=r[13],S=r[14],E=r[15],t[12]=O*e+w*h+S*p+E*x,t[13]=O*n+w*u+S*c+E*b,t[14]=O*o+w*M+S*f+E*m,t[15]=O*s+w*i+S*l+E*P,t}function l(t,a,r){let e,n,o,s,h,u,M,i,p,c,f,l,x=r[0],b=r[1],m=r[2];return a===t?(t[12]=a[0]*x+a[4]*b+a[8]*m+a[12],t[13]=a[1]*x+a[5]*b+a[9]*m+a[13],t[14]=a[2]*x+a[6]*b+a[10]*m+a[14],t[15]=a[3]*x+a[7]*b+a[11]*m+a[15]):(e=a[0],n=a[1],o=a[2],s=a[3],h=a[4],u=a[5],M=a[6],i=a[7],p=a[8],c=a[9],f=a[10],l=a[11],t[0]=e,t[1]=n,t[2]=o,t[3]=s,t[4]=h,t[5]=u,t[6]=M,t[7]=i,t[8]=p,t[9]=c,t[10]=f,t[11]=l,t[12]=e*x+h*b+p*m+a[12],t[13]=n*x+u*b+c*m+a[13],t[14]=o*x+M*b+f*m+a[14],t[15]=s*x+i*b+l*m+a[15]),t}function x(t,a,r){let e=r[0],n=r[1],o=r[2];return t[0]=a[0]*e,t[1]=a[1]*e,t[2]=a[2]*e,t[3]=a[3]*e,t[4]=a[4]*n,t[5]=a[5]*n,t[6]=a[6]*n,t[7]=a[7]*n,t[8]=a[8]*o,t[9]=a[9]*o,t[10]=a[10]*o,t[11]=a[11]*o,t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t}function b(a,r,e,n){let o,s,h,u,M,i,p,c,f,l,x,b,m,P,O,w,S,E,I,d,L,N,q,g,y=n[0],R=n[1],v=n[2],T=Math.sqrt(y*y+R*R+v*v);return Math.abs(T)<t.EPSILON?null:(y*=T=1/T,R*=T,v*=T,o=Math.sin(e),h=1-(s=Math.cos(e)),u=r[0],M=r[1],i=r[2],p=r[3],c=r[4],f=r[5],l=r[6],x=r[7],b=r[8],m=r[9],P=r[10],O=r[11],w=y*y*h+s,S=R*y*h+v*o,E=v*y*h-R*o,I=y*R*h-v*o,d=R*R*h+s,L=v*R*h+y*o,N=y*v*h+R*o,q=R*v*h-y*o,g=v*v*h+s,a[0]=u*w+c*S+b*E,a[1]=M*w+f*S+m*E,a[2]=i*w+l*S+P*E,a[3]=p*w+x*S+O*E,a[4]=u*I+c*d+b*L,a[5]=M*I+f*d+m*L,a[6]=i*I+l*d+P*L,a[7]=p*I+x*d+O*L,a[8]=u*N+c*q+b*g,a[9]=M*N+f*q+m*g,a[10]=i*N+l*q+P*g,a[11]=p*N+x*q+O*g,r!==a&&(a[12]=r[12],a[13]=r[13],a[14]=r[14],a[15]=r[15]),a)}function m(t,a,r){let e=Math.sin(r),n=Math.cos(r),o=a[4],s=a[5],h=a[6],u=a[7],M=a[8],i=a[9],p=a[10],c=a[11];return a!==t&&(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[4]=o*n+M*e,t[5]=s*n+i*e,t[6]=h*n+p*e,t[7]=u*n+c*e,t[8]=M*n-o*e,t[9]=i*n-s*e,t[10]=p*n-h*e,t[11]=c*n-u*e,t}function P(t,a,r){let e=Math.sin(r),n=Math.cos(r),o=a[0],s=a[1],h=a[2],u=a[3],M=a[8],i=a[9],p=a[10],c=a[11];return a!==t&&(t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[0]=o*n-M*e,t[1]=s*n-i*e,t[2]=h*n-p*e,t[3]=u*n-c*e,t[8]=o*e+M*n,t[9]=s*e+i*n,t[10]=h*e+p*n,t[11]=u*e+c*n,t}function O(t,a,r){let e=Math.sin(r),n=Math.cos(r),o=a[0],s=a[1],h=a[2],u=a[3],M=a[4],i=a[5],p=a[6],c=a[7];return a!==t&&(t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[0]=o*n+M*e,t[1]=s*n+i*e,t[2]=h*n+p*e,t[3]=u*n+c*e,t[4]=M*n-o*e,t[5]=i*n-s*e,t[6]=p*n-h*e,t[7]=c*n-u*e,t}function w(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=a[0],t[13]=a[1],t[14]=a[2],t[15]=1,t}function S(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=a[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function E(a,r,e){let n,o,s,h=e[0],u=e[1],M=e[2],i=Math.sqrt(h*h+u*u+M*M);return Math.abs(i)<t.EPSILON?null:(h*=i=1/i,u*=i,M*=i,n=Math.sin(r),s=1-(o=Math.cos(r)),a[0]=h*h*s+o,a[1]=u*h*s+M*n,a[2]=M*h*s-u*n,a[3]=0,a[4]=h*u*s-M*n,a[5]=u*u*s+o,a[6]=M*u*s+h*n,a[7]=0,a[8]=h*M*s+u*n,a[9]=u*M*s-h*n,a[10]=M*M*s+o,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a)}function I(t,a){let r=Math.sin(a),e=Math.cos(a);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function d(t,a){let r=Math.sin(a),e=Math.cos(a);return t[0]=e,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function L(t,a){let r=Math.sin(a),e=Math.cos(a);return t[0]=e,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function N(t,a,r){let e=a[0],n=a[1],o=a[2],s=a[3],h=e+e,u=n+n,M=o+o,i=e*h,p=e*u,c=e*M,f=n*u,l=n*M,x=o*M,b=s*h,m=s*u,P=s*M;return t[0]=1-(f+x),t[1]=p+P,t[2]=c-m,t[3]=0,t[4]=p-P,t[5]=1-(i+x),t[6]=l+b,t[7]=0,t[8]=c+m,t[9]=l-b,t[10]=1-(i+f),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function q(t,a){return t[0]=a[12],t[1]=a[13],t[2]=a[14],t}function g(t,a){let r=a[0],e=a[1],n=a[2],o=a[4],s=a[5],h=a[6],u=a[8],M=a[9],i=a[10];return t[0]=Math.sqrt(r*r+e*e+n*n),t[1]=Math.sqrt(o*o+s*s+h*h),t[2]=Math.sqrt(u*u+M*M+i*i),t}function y(t,a){let r=a[0]+a[5]+a[10],e=0;return r>0?(e=2*Math.sqrt(r+1),t[3]=.25*e,t[0]=(a[6]-a[9])/e,t[1]=(a[8]-a[2])/e,t[2]=(a[1]-a[4])/e):a[0]>a[5]&a[0]>a[10]?(e=2*Math.sqrt(1+a[0]-a[5]-a[10]),t[3]=(a[6]-a[9])/e,t[0]=.25*e,t[1]=(a[1]+a[4])/e,t[2]=(a[8]+a[2])/e):a[5]>a[10]?(e=2*Math.sqrt(1+a[5]-a[0]-a[10]),t[3]=(a[8]-a[2])/e,t[0]=(a[1]+a[4])/e,t[1]=.25*e,t[2]=(a[6]+a[9])/e):(e=2*Math.sqrt(1+a[10]-a[0]-a[5]),t[3]=(a[1]-a[4])/e,t[0]=(a[8]+a[2])/e,t[1]=(a[6]+a[9])/e,t[2]=.25*e),t}function R(t,a,r,e){let n=a[0],o=a[1],s=a[2],h=a[3],u=n+n,M=o+o,i=s+s,p=n*u,c=n*M,f=n*i,l=o*M,x=o*i,b=s*i,m=h*u,P=h*M,O=h*i,w=e[0],S=e[1],E=e[2];return t[0]=(1-(l+b))*w,t[1]=(c+O)*w,t[2]=(f-P)*w,t[3]=0,t[4]=(c-O)*S,t[5]=(1-(p+b))*S,t[6]=(x+m)*S,t[7]=0,t[8]=(f+P)*E,t[9]=(x-m)*E,t[10]=(1-(p+l))*E,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function v(t,a,r,e,n){let o=a[0],s=a[1],h=a[2],u=a[3],M=o+o,i=s+s,p=h+h,c=o*M,f=o*i,l=o*p,x=s*i,b=s*p,m=h*p,P=u*M,O=u*i,w=u*p,S=e[0],E=e[1],I=e[2],d=n[0],L=n[1],N=n[2];return t[0]=(1-(x+m))*S,t[1]=(f+w)*S,t[2]=(l-O)*S,t[3]=0,t[4]=(f-w)*E,t[5]=(1-(c+m))*E,t[6]=(b+P)*E,t[7]=0,t[8]=(l+O)*I,t[9]=(b-P)*I,t[10]=(1-(c+x))*I,t[11]=0,t[12]=r[0]+d-(t[0]*d+t[4]*L+t[8]*N),t[13]=r[1]+L-(t[1]*d+t[5]*L+t[9]*N),t[14]=r[2]+N-(t[2]*d+t[6]*L+t[10]*N),t[15]=1,t}function T(t,a){let r=a[0],e=a[1],n=a[2],o=a[3],s=r+r,h=e+e,u=n+n,M=r*s,i=e*s,p=e*h,c=n*s,f=n*h,l=n*u,x=o*s,b=o*h,m=o*u;return t[0]=1-p-l,t[1]=i+m,t[2]=c-b,t[3]=0,t[4]=i-m,t[5]=1-M-l,t[6]=f+x,t[7]=0,t[8]=c+b,t[9]=f-x,t[10]=1-M-p,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function A(t,a,r,e,n,o,s){let h=1/(r-a),u=1/(n-e),M=1/(o-s);return t[0]=2*o*h,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(r+a)*h,t[9]=(n+e)*u,t[10]=(s+o)*M,t[11]=-1,t[12]=0,t[13]=0,t[14]=s*o*2*M,t[15]=0,t}function j(t,a,r,e,n){let o=1/Math.tan(a/2),s=1/(e-n);return t[0]=o/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(n+e)*s,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*n*e*s,t[15]=0,t}function Y(t,a,r,e){let n=Math.tan(a.upDegrees*Math.PI/180),o=Math.tan(a.downDegrees*Math.PI/180),s=Math.tan(a.leftDegrees*Math.PI/180),h=Math.tan(a.rightDegrees*Math.PI/180),u=2/(s+h),M=2/(n+o);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=M,t[6]=0,t[7]=0,t[8]=-(s-h)*u*.5,t[9]=(n-o)*M*.5,t[10]=e/(r-e),t[11]=-1,t[12]=0,t[13]=0,t[14]=e*r/(r-e),t[15]=0,t}function _(t,a,r,e,n,o,s){let h=1/(a-r),u=1/(e-n),M=1/(o-s);return t[0]=-2*h,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*M,t[11]=0,t[12]=(a+r)*h,t[13]=(n+e)*u,t[14]=(s+o)*M,t[15]=1,t}function D(a,r,e,n){let o,s,h,u,M,i,p,c,f,l,x=r[0],b=r[1],m=r[2],P=n[0],O=n[1],w=n[2],S=e[0],E=e[1],I=e[2];return Math.abs(x-S)<t.EPSILON&&Math.abs(b-E)<t.EPSILON&&Math.abs(m-I)<t.EPSILON?mat4.identity(a):(p=x-S,c=b-E,f=m-I,o=O*(f*=l=1/Math.sqrt(p*p+c*c+f*f))-w*(c*=l),s=w*(p*=l)-P*f,h=P*c-O*p,(l=Math.sqrt(o*o+s*s+h*h))?(o*=l=1/l,s*=l,h*=l):(o=0,s=0,h=0),u=c*h-f*s,M=f*o-p*h,i=p*s-c*o,(l=Math.sqrt(u*u+M*M+i*i))?(u*=l=1/l,M*=l,i*=l):(u=0,M=0,i=0),a[0]=o,a[1]=u,a[2]=p,a[3]=0,a[4]=s,a[5]=M,a[6]=c,a[7]=0,a[8]=h,a[9]=i,a[10]=f,a[11]=0,a[12]=-(o*x+s*b+h*m),a[13]=-(u*x+M*b+i*m),a[14]=-(p*x+c*b+f*m),a[15]=1,a)}function k(t,a,r,e){let n=a[0],o=a[1],s=a[2],h=e[0],u=e[1],M=e[2],i=n-r[0],p=o-r[1],c=s-r[2],f=i*i+p*p+c*c;f>0&&(i*=f=1/Math.sqrt(f),p*=f,c*=f);let l=u*c-M*p,x=M*i-h*c,b=h*p-u*i;return t[0]=l,t[1]=x,t[2]=b,t[3]=0,t[4]=p*b-c*x,t[5]=c*l-i*b,t[6]=i*x-p*l,t[7]=0,t[8]=i,t[9]=p,t[10]=c,t[11]=0,t[12]=n,t[13]=o,t[14]=s,t[15]=1,t}function F(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function V(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))}function W(t,a,r){return t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t[3]=a[3]+r[3],t[4]=a[4]+r[4],t[5]=a[5]+r[5],t[6]=a[6]+r[6],t[7]=a[7]+r[7],t[8]=a[8]+r[8],t[9]=a[9]+r[9],t[10]=a[10]+r[10],t[11]=a[11]+r[11],t[12]=a[12]+r[12],t[13]=a[13]+r[13],t[14]=a[14]+r[14],t[15]=a[15]+r[15],t}function X(t,a,r){return t[0]=a[0]-r[0],t[1]=a[1]-r[1],t[2]=a[2]-r[2],t[3]=a[3]-r[3],t[4]=a[4]-r[4],t[5]=a[5]-r[5],t[6]=a[6]-r[6],t[7]=a[7]-r[7],t[8]=a[8]-r[8],t[9]=a[9]-r[9],t[10]=a[10]-r[10],t[11]=a[11]-r[11],t[12]=a[12]-r[12],t[13]=a[13]-r[13],t[14]=a[14]-r[14],t[15]=a[15]-r[15],t}function Z(t,a,r){return t[0]=a[0]*r,t[1]=a[1]*r,t[2]=a[2]*r,t[3]=a[3]*r,t[4]=a[4]*r,t[5]=a[5]*r,t[6]=a[6]*r,t[7]=a[7]*r,t[8]=a[8]*r,t[9]=a[9]*r,t[10]=a[10]*r,t[11]=a[11]*r,t[12]=a[12]*r,t[13]=a[13]*r,t[14]=a[14]*r,t[15]=a[15]*r,t}function Q(t,a,r,e){return t[0]=a[0]+r[0]*e,t[1]=a[1]+r[1]*e,t[2]=a[2]+r[2]*e,t[3]=a[3]+r[3]*e,t[4]=a[4]+r[4]*e,t[5]=a[5]+r[5]*e,t[6]=a[6]+r[6]*e,t[7]=a[7]+r[7]*e,t[8]=a[8]+r[8]*e,t[9]=a[9]+r[9]*e,t[10]=a[10]+r[10]*e,t[11]=a[11]+r[11]*e,t[12]=a[12]+r[12]*e,t[13]=a[13]+r[13]*e,t[14]=a[14]+r[14]*e,t[15]=a[15]+r[15]*e,t}function z(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]&&t[4]===a[4]&&t[5]===a[5]&&t[6]===a[6]&&t[7]===a[7]&&t[8]===a[8]&&t[9]===a[9]&&t[10]===a[10]&&t[11]===a[11]&&t[12]===a[12]&&t[13]===a[13]&&t[14]===a[14]&&t[15]===a[15]}function B(a,r){let e=a[0],n=a[1],o=a[2],s=a[3],h=a[4],u=a[5],M=a[6],i=a[7],p=a[8],c=a[9],f=a[10],l=a[11],x=a[12],b=a[13],m=a[14],P=a[15],O=r[0],w=r[1],S=r[2],E=r[3],I=r[4],d=r[5],L=r[6],N=r[7],q=r[8],g=r[9],y=r[10],R=r[11],v=r[12],T=r[13],A=r[14],j=r[15];return Math.abs(e-O)<=t.EPSILON*Math.max(1,Math.abs(e),Math.abs(O))&&Math.abs(n-w)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(w))&&Math.abs(o-S)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(S))&&Math.abs(s-E)<=t.EPSILON*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(h-I)<=t.EPSILON*Math.max(1,Math.abs(h),Math.abs(I))&&Math.abs(u-d)<=t.EPSILON*Math.max(1,Math.abs(u),Math.abs(d))&&Math.abs(M-L)<=t.EPSILON*Math.max(1,Math.abs(M),Math.abs(L))&&Math.abs(i-N)<=t.EPSILON*Math.max(1,Math.abs(i),Math.abs(N))&&Math.abs(p-q)<=t.EPSILON*Math.max(1,Math.abs(p),Math.abs(q))&&Math.abs(c-g)<=t.EPSILON*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(f-y)<=t.EPSILON*Math.max(1,Math.abs(f),Math.abs(y))&&Math.abs(l-R)<=t.EPSILON*Math.max(1,Math.abs(l),Math.abs(R))&&Math.abs(x-v)<=t.EPSILON*Math.max(1,Math.abs(x),Math.abs(v))&&Math.abs(b-T)<=t.EPSILON*Math.max(1,Math.abs(b),Math.abs(T))&&Math.abs(m-A)<=t.EPSILON*Math.max(1,Math.abs(m),Math.abs(A))&&Math.abs(P-j)<=t.EPSILON*Math.max(1,Math.abs(P),Math.abs(j))}const C=f;exports.mul=C;const G=X;function H(t,a,r){return t[0]=r[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=r[2],t[11]=0,t[12]=a[0],t[13]=a[1],t[14]=a[2],t[15]=1,t}function J(a,r,e,n,o,s,h,u){const M=o[0]/o[1];let i=e*Math.tan(t.toRadian(r)/2),p=2*i,c=M*p,f=-c/2;u&&(f+=u.x*c/o[0],i-=u.y*p/o[1],c*=u.width/o[0],p*=u.height/o[1]);const l=f+c,x=i-p,b=2*e/(l-f),m=(l+f)/(l-f),P=(i+x)/(i-x),O=2*e/(i-x),w=-(n+e)/(n-e),S=-2*n*e/(n-e);let E=0,I=0,d=h[0]-s[0],L=h[1]-s[1],N=h[2]-s[2],q=d*d+L*L+N*N;if(q>0){const t=1/Math.sqrt(q);d*=t,L*=t,N*=t}if((q=L*L+d*d)>0){const t=1/Math.sqrt(q);E=-L*t,I=d*t}const g=-N*I,y=N*E,R=d*I-L*E,v=-(E*h[0]+I*h[1]),T=-(g*h[0]+y*h[1]+R*h[2]),A=-(d*h[0]+L*h[1]+N*h[2]);return a[0]=b*E+m*d,a[1]=O*g+P*d,a[2]=w*d,a[3]=-d,a[4]=b*I+m*L,a[5]=O*y+P*L,a[6]=w*L,a[7]=-L,a[8]=m*N,a[9]=O*R+P*N,a[10]=w*N,a[11]=-N,a[12]=b*v+m*A,a[13]=O*T+P*A,a[14]=w*A+S,a[15]=-A,a}exports.sub=G;
},{"./common":"BzQH"}],"AAFr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.syncableMetatileHash=exports.TEXTURE_IMAGE_PADDING=exports.defaultFont=exports.fontNames=exports.maxScaleValue=exports.minScaleValue=exports.maxU32=exports.invSqrt2=exports.z0Scale=exports.zptPerInch=exports.cmPerInch=exports.maxTilePoint=exports.tileHeight=exports.worldSize=exports.tileSizeZpt=void 0;var e=256;exports.tileSizeZpt=e;var t=Math.pow(2,32);exports.worldSize=t;var a=Math.pow(2,20);exports.tileHeight=a;var r=Math.pow(2,16)-1;exports.maxTilePoint=r;var o=2.54;exports.cmPerInch=o;var s=96;exports.zptPerInch=s;var p=t/(e/s*o);exports.z0Scale=p;var x=.7071067811865475;exports.invSqrt2=x;var l=4294967295;exports.maxU32=l;var n=1.175494351e-38;exports.minScaleValue=n;var i=3.402823466e38;exports.maxScaleValue=i;var S=["Arial","Helvetica","HelveticaNeueCyr","Open_Sans","Open_Sans_Semibold","Open_Sans_Italic","Segoe_UI","PT_Sans_Caption","PT_Sans","Verdana","Verdana_bold","Noto_Sans","Noto_Sans_Semibold","Noto_Sans_Italic","SuisseIntl_Bold"];exports.fontNames=S;var _="Noto_Sans";exports.defaultFont=_;var v=1;exports.TEXTURE_IMAGE_PADDING=v;var c=-3;exports.syncableMetatileHash=c;
},{}],"h53r":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=i,exports.fromGeo=a,exports.expandByPoint=m,exports.copy=u,exports.reset=c,exports.center=p,exports.clampPoint=f,exports.contains=s;var e=o(require("@2gis/gl-matrix/vec2")),t=require("../common"),n=require("../geo");function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(r=function(e){return e?n:t})(e)}function o(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=r(t);if(n&&n.has(e))return n.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var m=i?Object.getOwnPropertyDescriptor(e,a):null;m&&(m.get||m.set)?Object.defineProperty(o,a,m):o[a]=e[a]}return o.default=e,n&&n.set(e,o),o}function i(t,n){return{min:t||e.fromValues(1/0,1/0),max:n||e.fromValues(-1/0,-1/0)}}function a(e){return i((0,n.projectGeoToMap)(e.southWest),(0,n.projectGeoToMap)(e.northEast))}function m(t,n){e.min(t.min,t.min,n),e.max(t.max,t.max,n)}function u(e,t){e.min[0]=t.min[0],e.max[0]=t.max[0],e.min[1]=t.min[1],e.max[1]=t.max[1]}function c(e){e.min[0]=1/0,e.max[0]=-1/0,e.min[1]=1/0,e.max[1]=-1/0}function p(e,t){e[0]=t.min[0]+(t.max[0]-t.min[0])/2,e[1]=t.min[1]+(t.max[1]-t.min[1])/2}function f(e,n,r){e[0]=(0,t.clamp)(r[0],n.min[0],n.max[0]),e[1]=(0,t.clamp)(r[1],n.min[1],n.max[1])}function s(e,t){return t[0]<=e.max[0]&&t[0]>=e.min[0]&&t[1]<=e.max[1]&&t[1]>=e.min[1]}
},{"@2gis/gl-matrix/vec2":"QsKn","../common":"NsaN","../geo":"DFqc"}],"DFqc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tilePointToMapPoint=p,exports.mapPointToTilePoint=u,exports.projectGeoToMap=s,exports.projectMapToGeo=l,exports.zoomToHeight=f,exports.heightToZoom=d,exports.zoomToScale=M,exports.scaleToZoom=h,exports.getStyleZoom=m,exports.getZoomFromStyleZoom=T,exports.tileZoomToSize=S,exports.worldToZptDistance=g,exports.zptToWorldDistance=v,exports.zptToSceneDistance=z,exports.geoToMapDistance=w,exports.tileCoordsToMapPoint=P,exports.mapPointTo32ZoomTileCoords=y,exports.tileCenterToMapPoint=j,exports.getBounds=Z,exports.getScreenVertices=O,exports.getTileCoordsByCenterAndZoom=B,exports.getBoundsTileCoords=C,exports.projectionScaleFactor=D,exports.geoPointsDistance=b,exports.tileCoordsToOSM=exports.worldBounds=void 0;var e=c(require("@2gis/gl-matrix/vec2")),t=c(require("@2gis/gl-matrix/vec3")),o=require("./common"),r=require("../constants"),n=require("../config"),i=c(require("./bounds"));function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,o=new WeakMap;return(a=function(e){return e?o:t})(e)}function c(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var o=a(t);if(o&&o.has(e))return o.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var c=n?Object.getOwnPropertyDescriptor(e,i):null;c&&(c.get||c.set)?Object.defineProperty(r,i,c):r[i]=e[i]}return r.default=e,o&&o.set(e,r),r}function p(e,t,o){e[0]=t[0]*o.size/r.maxTilePoint+o.offset[0],e[1]=t[1]*o.size/r.maxTilePoint+o.offset[1],e[2]=t[2]*r.tileHeight/r.maxTilePoint}function u(e,t,o){e[0]=(t[0]-o.offset[0])*r.maxTilePoint/o.size,e[1]=(t[1]-o.offset[1])*r.maxTilePoint/o.size,e[2]=t[2]*r.maxTilePoint/r.tileHeight}function s(e){var n=r.worldSize/2,i=Math.sin((0,o.degToRad)(e[1])),a=e[0]*r.worldSize/360,c=Math.log((1+i)/(1-i))*r.worldSize/(4*Math.PI);return t.fromValues((0,o.clamp)(a,-n,n),(0,o.clamp)(c,-n,n),0)}function l(e){var t=[0,0];t[0]=360*e[0]/r.worldSize;var n=-2*Math.PI/r.worldSize;return t[1]=90-2*(0,o.radToDeg)(Math.atan(Math.exp(e[1]*n))),t}function f(e,t){return(0,o.correctScreenHeight)(t[1])*r.worldSize/(2*r.tileSizeZpt*Math.tan((0,o.degToRad)(n.camera.fov)/2)*Math.pow(2,e))}function d(e,t){return Math.log((0,o.correctScreenHeight)(t[1])*r.worldSize/(2*r.tileSizeZpt*Math.tan((0,o.degToRad)(n.camera.fov)/2)*e))/Math.LN2}function M(e){return r.z0Scale*Math.pow(2,-e)}function h(e){return Math.max(0,Math.log(r.z0Scale/e)/Math.LN2)}function x(e){var t=l(e)[1],r=1/(2*Math.cos((0,o.degToRad)(t)));return Math.log(r)/Math.log(2)}function m(e,t){var r=x(t)*(0,o.affineStep)(9,10,e);return e+(0,o.clamp)(r,-1,0)}function T(e,t){var r=x(t),n=r*(0,o.affineStep)(9,10+r,e);return e-(0,o.clamp)(n,-1,0)}function S(e){return Math.pow(2,32-e)}function g(e,t){return e*Math.pow(2,t)*r.tileSizeZpt/r.worldSize}function v(e,t){return e*Math.pow(2,-t)*r.worldSize/r.tileSizeZpt}function z(e,t){return r.cmPerInch*(e/r.zptPerInch)/t}function w(e,t){return t*(r.worldSize/40075e3)*D(e)}function P(e){var o=S(e[2]);return t.fromValues(e[0]*o-2147483648,e[1]*o-2147483648,0)}function y(e){return[e[0]+2147483648,e[1]+2147483648,32,32]}function j(e){var o=S(e[2]);return t.fromValues((e[0]+.5)*o-2147483648,(e[1]+.5)*o-2147483648,0)}function Z(t){var o=i.create(e.clone(t.center),e.clone(t.center)),r=O(t);return i.expandByPoint(o,r[0]),i.expandByPoint(o,r[1]),i.expandByPoint(o,r[2]),i.expandByPoint(o,r[3]),o}function O(e){var t=e.size,r=e.zoom,i=e.viewport,a=[(0,o.projectScreenToMap)(e,[i.left,t[1]+i.top]),(0,o.projectScreenToMap)(e,[t[0]+i.left,t[1]+i.top]),(0,o.projectScreenToMap)(e,[t[0]+i.left,i.top]),(0,o.projectScreenToMap)(e,[i.left,i.top])],c=(0,o.getLineConstants)(a[0],a[1]),p=(0,o.pointToLineDistance)(a[2],c),u=v(t[1],r)*n.camera.viewportLimitRatio;if(p>u){var s=u/p;a[2]=[(a[2][0]-a[1][0])*s+a[1][0],(a[2][1]-a[1][1])*s+a[1][1]],a[3]=[(a[3][0]-a[0][0])*s+a[0][0],(a[3][1]-a[0][1])*s+a[0][1]]}return a}function B(e,t){var o=S(t);return[(e[0]-o/2+2147483648)/o,(e[1]-o/2+2147483648)/o,t,t]}function C(t,o){void 0===o&&(o=1);var r=Math.max(t.max[0]-t.min[0],t.max[1]-t.min[1],1)*o,n=32-Math.log(r)/Math.LN2,a=e.create();return i.center(a,t),B(a,n)}function D(e){return 1/Math.cos(e[1]*Math.PI/180)}function b(e,t){var o=Math.PI/180,r=e[1]*o,n=t[1]*o,i=Math.sin((t[1]-e[1])*o/2),a=Math.sin((t[0]-e[0])*o/2),c=i*i+Math.cos(r)*Math.cos(n)*a*a,p=2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c));return Math.round(6371e3*p)}var q=i.create([-r.worldSize/2,-r.worldSize/2],[r.worldSize/2,r.worldSize/2]);exports.worldBounds=q;var I=function(e){var t=e[0],o=e[1],r=e[2],n=e[3];return[t,Math.pow(2,r)-1-o,r,n]};exports.tileCoordsToOSM=I;
},{"@2gis/gl-matrix/vec2":"QsKn","@2gis/gl-matrix/vec3":"LPv5","./common":"NsaN","../constants":"AAFr","../config":"xX11","./bounds":"h53r"}],"NsaN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.equalPoints=c,exports.clamp=s,exports.sign=f,exports.normalizeMousePosition=p,exports.removeUndefinedQueryParameters=m,exports.getUrl=g,exports.getUrlFromTemplate=v,exports.template=x,exports.degToRad=h,exports.radToDeg=d,exports.setEyePosition=A,exports.projectMapToScreenWithVP=P,exports.setVPMatrix=O,exports.correctScreenHeight=S,exports.getCenterCorrection=T,exports.getLineConstants=z,exports.getTetragonBoundingBox=_,exports.rectangleIntersectsRectangle=E,exports.rectangleIntersectsTrapeze=I,exports.pointToLineDistance=U,exports.pow2AtLeast=q,exports.bufferToImage=C,exports.svgToImage=R,exports.resizeImage=V,exports.applyDefaults=k,exports.reverseObject=L,exports.getSubdomainFromString=B,exports.mapPointPitch=N,exports.pick=W,exports.subtract=H,exports.mapSubtract=Q,exports.affineStep=Y,exports.getFractionalPart=G,exports.isBetween=K,exports.isValidGeoPoint=Z,exports.equalSets=J,exports.deepEqual=X,exports.excludeItemFromArray=$,exports.projectMapToScreen=exports.projectScreenToMap=void 0;var e=require("tslib"),t=u(require("@2gis/gl-matrix/vec2")),r=u(require("@2gis/gl-matrix/vec3")),n=u(require("@2gis/gl-matrix/mat4")),o=require("../config"),a=require("./geo");function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function u(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}function c(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function s(e,t,r){return e=Math.max(e,t),e=Math.min(e,r)}function f(e){return 0===(e=+e)||Number.isNaN(e)?e:e>0?1:-1}function p(e,t){return[t[0]/e[0]*2-1,-t[1]/e[1]*2+1]}function m(e){var t=e.split("?"),r=t[0],n=t[1];if(!n)return r;var o=n.split("&").map(function(e){return e.split("=")}).filter(function(e){return"undefined"!==e[1]}).map(function(e){return e.join("=")}).join("&");return o.length?r+"?"+o:r}function g(t,r){var n=x(r.host,{subdomain:r.subdomain});return m(x(o.urls[t],(0,e.__assign)((0,e.__assign)({},r),{host:n})))}function v(e,t){return m(x(e,t))}var l=/\{(\w+)\}/g;function x(e,t){return e.replace(l,function(e,r){return t[r]})}function h(e){return e*Math.PI/180}function d(e){return e/Math.PI*180}function A(e,t){var r=t.center,n=t.rotation,o=t.zoom,i=t.pitch,u=t.size,c=(0,a.zoomToHeight)(o,u),s=Math.max(c*Math.sin(i),1);e[0]=r[0]+Math.sin(n)*s,e[1]=r[1]-Math.cos(n)*s,e[2]=c*Math.cos(i)}var b=function(){var e=n.create();return function(t,n){var o=r.create();return O(e,t),w(o,n,e,t),o}}();exports.projectScreenToMap=b;var M=n.create(),y=r.create();function w(e,t,o,a){if(A(y,a),n.invert(M,o),e[0]=(t[0]-a.viewport.left)/a.size[0]*2-1,e[1]=-(t[1]-a.viewport.top)/a.size[1]*2+1,e[2]=0,r.transformMat4(e,e,M),e[0]-=y[0],e[1]-=y[1],e[2]-=y[2],r.normalize(e,e),0!==e[2]){var i=-y[2]/e[2];i>=0?(e[0]=y[0]+e[0]*i,e[1]=y[1]+e[1]*i,e[2]=y[2]+e[2]*i):e[0]=e[1]=e[2]=0}else e[0]=e[1]=e[2]=0}var j=function(){var e=n.create();return function(t,r){var n=[0,0,0];return O(e,t),P(n,r,e,t.size,t.viewport),n}}();function P(e,t,r,n,o){var a=t[0],i=t[1],u=t[2],c=n[0]/2,s=n[1]/2,f=r[3]*a+r[7]*i+r[11]*u+r[15];e[0]=c+o.left+(r[0]*a+r[4]*i+r[12])*c/f,e[1]=s+o.top-(r[1]*a+r[5]*i+r[9]*u+r[13])*s/f}function O(e,t,r,a,i){void 0===r&&(r=o.camera.near),void 0===a&&(a=o.camera.far);var u=t.center,c=t.size,s=t.padding,f=o.camera.fov;A(y,t);var p=Math.max(0,s.top-s.bottom)*Math.tan(t.pitch),m=S(c[1])+p,g=void 0!==i?i:{x:0+(s.right-s.left)/2,y:0+(s.bottom-s.top)/2,width:c[0],height:c[1]};g.y+=(m-c[1])/2;var v=[c[0],m];n.vpFromTargetEyeView(e,f,r,a,v,u,y,g)}function S(e){return Math.max(e,o.camera.minCalculationScreenHeight)}function T(t,n,o){void 0!==o.zoom&&(o.zoom=s(o.zoom,t.minZoom,t.maxZoom));var a=b(t,n),i=b((0,e.__assign)((0,e.__assign)({},t),o),n),u=r.create();return r.sub(u,a,i),u}function z(e,t){return{a:e[1]-t[1],b:t[0]-e[0],c:e[0]*t[1]-t[0]*e[1]}}function _(e){var t=e[0][0],r=e[0][1],n=e[1][0],o=e[1][1],a=e[2][0],i=e[2][1],u=e[3][0],c=e[3][1];return{min:[Math.min(t,n,a,u),Math.min(r,o,i,c)],max:[Math.max(t,n,a,u),Math.max(r,o,i,c)]}}function E(e,t){var r=e.min[0]<=t.max[0]&&t.min[0]<=e.max[0],n=e.min[1]<=t.max[1]&&t.min[1]<=e.max[1];return r&&n}function I(e,t){if(!E(e,_(t)))return!1;for(var r=[z(t[3],t[2]),z(t[1],t[0]),z(t[0],t[3]),z(t[2],t[1])],n=[e.min,e.max,[e.min[0],e.max[1]],[e.max[0],e.min[1]]],o=0;o<r.length;o++){for(var a=r[o],i=!0,u=0;u<n.length;u++){var c=n[u];if(a.a*c[0]+a.b*c[1]+a.c<0){i=!1;break}}if(i)return!1}return!0}function U(e,t){return Math.abs(t.a*e[0]+t.b*e[1]+t.c)/Math.sqrt(t.a*t.a+t.b*t.b)}function q(e){return e>>>=0,e-=1,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,(e|=e>>16)+1}function C(e){var t=new Blob([e],{type:"image/png"}),r=URL.createObjectURL(t),n=document.createElement("img");return new Promise(function(t){n.onload=function(){URL.revokeObjectURL(r),t(n)},0===e.byteLength?n.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=":n.src=r})}function R(e,t,r){var n=document.createElement("img");return n.width=t,n.height=r,new Promise(function(t){n.onload=function(){return t(n)},n.src="data:image/svg+xml;base64,"+btoa(e)})}function V(e,t){if(t[0]===e.width&&t[1]===e.height)return e;var r=document.createElement("canvas"),n=r.getContext("2d");return r.width=t[0],r.height=t[1],n.shadowColor="transparent",n.shadowBlur=0,n.drawImage(e,0,0,t[0],t[1]),r}function k(t,r){var n=(0,e.__assign)({},r);for(var o in t)void 0!==t[o]&&(n[o]=t[o]);return n}function L(e){var t={};for(var r in e){t[e[r]]=r}return t}function B(e,t){for(var r=0,n=0;n<t.length;n++)r+=t.charCodeAt(n);return e[r%e.length]}exports.projectMapToScreen=j;var D=t.create(),F=t.create();function N(e,r,n){t.subtract(D,n.center,e),t.subtract(F,r,e);var o=t.dot(D,F)/t.length(D);return Math.atan2(o,e[2])}function W(e,t){for(var r={},n=0,o=t;n<o.length;n++){var a=o[n];r[a]=e[a]}return r}function H(e,t){var r=[];for(var n in e)t[n]||r.push(e[n]);return r}function Q(e,t){var r=[];return e.forEach(function(e,n){t.has(n)||r.push(e)}),r}function Y(e,t,r){return s((r-e)/(t-e),0,1)}function G(e){return e%1}function K(e,t,r){return e>=t&&e<=r}function Z(e){var t=e[0],r=e[1];return K(t,-180,180)&&K(r,-90,90)}function J(e,t){if(e.size!==t.size)return!1;for(var r=0,n=Array.from(e);r<n.length;r++){var o=n[r];if(!t.has(o))return!1}return!0}function X(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var r,n=Array.isArray(e),o=Array.isArray(t),a=void 0,i=void 0;if(n&&o){if((r=e.length)!==t.length)return!1;for(a=r;0!=a--;)if(!X(e[a],t[a]))return!1;return!0}if(n!==o)return!1;var u=e instanceof Date,c=t instanceof Date;if(u!==c)return!1;if(u&&c)return e.getTime()===t.getTime();var s=e instanceof RegExp,f=t instanceof RegExp;if(s!==f)return!1;if(s&&f)return e.toString()===t.toString();var p=Object.keys(e);if((r=p.length)!==Object.keys(t).length)return!1;for(a=r;0!=a--;)if(!Object.prototype.hasOwnProperty.call(t,p[a]))return!1;for(a=r;0!=a--;)if(!X(e[i=p[a]],t[i]))return!1;return!0}return e!=e&&t!=t}function $(e,t){var r=e.indexOf(t);return-1!==r&&(e.splice(r,1),!0)}
},{"tslib":"vCxL","@2gis/gl-matrix/vec2":"QsKn","@2gis/gl-matrix/vec3":"LPv5","@2gis/gl-matrix/mat4":"SHWl","../config":"xX11","./geo":"DFqc"}],"RE1d":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hashToNumber=s,exports.hashToString=n,exports.prepareTileProps=a,exports.prepareMetatile=i,exports.createMetatile=l,exports.enhanceTileProps=u,exports.prepareLabelingGroups=p,exports.fixedMetatile=exports.fixedTileProps=void 0;var e=require("./common"),r=o(require("base64-arraybuffer"));function t(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,o=new WeakMap;return(t=function(e){return e?o:r})(e)}function o(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var o=t(r);if(o&&o.has(e))return o.get(e);var s={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=n?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(s,a,i):s[a]=e[a]}return s.default=e,o&&o.set(e,s),s}function s(e){for(var r=0,t=0;t<e.length;t++)r+=e[t]*Math.pow(256,e.length-1-t);return r}function n(e){for(var t=new Uint8Array(6),o=0;o<6;o++)t[o]=255&Math.floor(e/Math.pow(256,5-o));return encodeURIComponent(r.encode(t))}function a(e,r){var t={};e.forEach(function(e,r){t[e]=r});var o=e.length;for(var s in t.selected=o++,t.hovered=o++,t.dpi=o++,t.isRealtime=o++,t.pixelDensityPreset=o++,r)void 0===t[s]&&(t[s]=o++);return t}function i(r){var t=a(r.tileProps,r.defaultProps),o=(0,e.reverseObject)(r.objectClasses),s={};for(var n in r.defaultProps)s[n]={index:t[n],value:r.defaultProps[n]};return{version:r.version,classes:r.classes,sublayers:r.sublayers,sublayersByIndex:(0,e.reverseObject)(r.sublayers),objectClassesByIndex:o,objectClasses:r.objectClasses,tileProps:t,defaultProps:s}}function l(e,r){var t={};if(r)for(var o=0;o<r.length;o++)t[r[o]]=o;return i({classes:{},sublayers:t,objectClasses:{},version:"",zenithVersion:"",date:"",defaultProps:{},tileProps:e})}function u(e,r){for(var t=e.tileProps,o=Object.keys(t).length,s=0,n=r;s<n.length;s++){var a=n[s];void 0===t[a]&&(t[a]=o,o+=1)}}function p(e){for(var r=e.groups,t=e.table,o={},s=0;s<t.length;s++){var n=t[s],a=r[s];o[a]={};for(var i=0;i<n.length;i++){var l=r[i];o[a][l]=t[s][i]}}var u=r.reduce(function(e,r,t){return e[r]=t,e},{});return{indexToGroup:r,groupToIndex:u,table:o}}var c=0,f={beginningIsCut:c++,class:c++,componentDistanceEnd:c++,componentDistanceStart:c++,iconPriority:c++,labelPriority:c++,label2Priority:c++,dpi:c++,endingIsCut:c++,height:c++,hiddenByPlanBuildingId:c++,id:c++,isRealtime:c++,db_label:c++,db_label2:c++,nextPointX:c++,nextPointY:c++,db_object_class:c++,objectLength:c++,pixelDensityPreset:c++,previousPointX:c++,previousPointY:c++,db_region:c++,selected:c++,hovered:c++,db_sublayer:c++,traffic_color:c++,traffic_road_class:c++,traffic_road_z_level:c++};exports.fixedTileProps=f;var d={version:"0.0.0",tileProps:f,defaultProps:{},classes:{},sublayers:{},sublayersByIndex:{},objectClasses:{},objectClassesByIndex:{}};exports.fixedMetatile=d;
},{"./common":"NsaN","base64-arraybuffer":"QVok"}],"NjwQ":[function(require,module,exports) {
"use strict";var e=exports.TileRequestUrl={};e.read=function(i,r){return i.readFields(e._readField,{tiles:[]},r)},e._readField=function(i,r,t){1===i&&r.tiles.push(e.Tile.read(t,t.readVarint()+t.pos))},e.write=function(i,r){if(i.tiles)for(var t=0;t<i.tiles.length;t++)r.writeMessage(1,e.Tile.write,i.tiles[t])},e.Tile={},e.Tile.read=function(i,r){return i.readFields(e.Tile._readField,{x:0,y:0,zoom:0},r)},e.Tile._readField=function(e,i,r){1===e?i.x=r.readVarint():2===e?i.y=r.readVarint():3===e&&(i.zoom=r.readVarint())},e.Tile.write=function(e,i){e.x&&i.writeVarintField(1,e.x),e.y&&i.writeVarintField(2,e.y),e.zoom&&i.writeVarintField(3,e.zoom)};var i=exports.TileResponseData={};i.read=function(e,r){return e.readFields(i._readField,{tileGroups:[]},r)},i._readField=function(e,r,t){1===e&&r.tileGroups.push(i.TileGroup.read(t,t.readVarint()+t.pos))},i.write=function(e,r){if(e.tileGroups)for(var t=0;t<e.tileGroups.length;t++)r.writeMessage(1,i.TileGroup.write,e.tileGroups[t])},i.TileGroup={},i.TileGroup.read=function(e,r){return e.readFields(i.TileGroup._readField,{x:0,y:0,zoom:0,tiles:[]},r)},i.TileGroup._readField=function(e,r,t){1===e?r.x=t.readVarint():2===e?r.y=t.readVarint():3===e?r.zoom=t.readVarint():4===e&&r.tiles.push(i.TileGroup.Tile.read(t,t.readVarint()+t.pos))},i.TileGroup.write=function(e,r){if(e.x&&r.writeVarintField(1,e.x),e.y&&r.writeVarintField(2,e.y),e.zoom&&r.writeVarintField(3,e.zoom),e.tiles)for(var t=0;t<e.tiles.length;t++)r.writeMessage(4,i.TileGroup.Tile.write,e.tiles[t])},i.TileGroup.Tile={},i.TileGroup.Tile.read=function(e,r){return e.readFields(i.TileGroup.Tile._readField,{regionId:0,hash:null,data:null},r)},i.TileGroup.Tile._readField=function(e,i,r){1===e?i.regionId=r.readVarint():2===e?i.hash=r.readBytes():3===e&&(i.data=r.readBytes())},i.TileGroup.Tile.write=function(e,i){e.regionId&&i.writeVarintField(1,e.regionId),e.hash&&i.writeBytesField(2,e.hash),e.data&&i.writeBytesField(3,e.data)};
},{}],"AxmI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createTileInfo=f,exports.coordsToKey=c,exports.getModKey=p,exports.keyToCoords=d,exports.splitBuffer=h,exports.stripBuffers=m,exports.copyTileBuffer=v,exports.isTileVisible=g,exports.findVisibleTiles=x,exports.getTilesUrl=M,exports.isIntersecting=y,exports.isChild=T,exports.getParentKey=I,exports.selectParent=b,exports.selectChildren=w,exports.compare=P,exports.compareIds=_,exports.equalIdArrays=z,exports.filterIdArrayByIdSet=q,exports.isRegionId=O;var e=l(require("@2gis/gl-matrix/vec2")),r=l(require("base64-arraybuffer")),t=s(require("pbf")),o=require("./metatile"),n=require("./common"),i=require("./geo"),a=l(require("./pbfSchemes/server.proto"));function s(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(u=function(e){return e?t:r})(e)}function l(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u(r);if(t&&t.has(e))return t.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=n?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(o,i,a):o[i]=e[i]}return o.default=e,t&&t.set(e,o),o}function f(e){return{coords:e,size:(0,i.tileZoomToSize)(e[2]),offset:(0,i.tileCoordsToMapPoint)(e)}}function c(e){return e[0]+"_"+e[1]+"_"+e[2]+"_"+e[3]}function p(e,r){return c(e)+"_"+r.stringify()}function d(e){var r=e.split("_");return[parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10),parseInt(r[3],10)]}function h(e){var r=new t.default(e),n=a.TileResponseData.read(r).tileGroups[0],i=n.x,s=n.y,u=n.zoom;return n.tiles.map(function(e){var r=e.regionId,t=e.hash,n=e.data;return n||(console.warn("Tile "+u+"_"+i+"_"+s+" from region "+r+" is corrupt (has no data)"),n=new Uint8Array(0)),{data:n,regionId:r,metatileHash:(0,o.hashToNumber)(t)}})}function m(e){return e.map(function(e){return{regionId:e.regionId,metatileHash:e.metatileHash}})}function v(e){var r=4*Math.ceil(e.byteLength/4),t=new ArrayBuffer(r);return new Uint8Array(t).set(e),t}function g(e,r){var t=e[0],o=e[1],a=e[2],s={min:(0,i.tileCoordsToMapPoint)([t,o,a,a]),max:(0,i.tileCoordsToMapPoint)([t+1,o+1,a,a])};return(0,n.rectangleIntersectsTrapeze)(s,r)}function x(e,r,t){for(var o=(0,n.getTetragonBoundingBox)(e),a=(0,i.tileZoomToSize)(r),s=Math.pow(2,r)-1,u=Math.max(Math.floor((o.min[0]+2147483648)/a),0),l=Math.min(Math.floor((o.max[0]+2147483648)/a),s),f=Math.max(Math.floor((o.min[1]+2147483648)/a),0),p=Math.min(Math.floor((o.max[1]+2147483648)/a),s),d=[],h=u;h<=l;h++)for(var m=f;m<=p;m++){var v=[h,m,r,t];g(v,e)&&d.push(c(v))}return d}function M(e,o,i,s,u,l,f,c,p,d){var h=new t.default,m={tiles:[{x:u[0],y:u[1],zoom:u[2]}]};return a.TileRequestUrl.write(m,h),(0,n.getUrl)("tiles",{host:e,tileSet:o,tileKey:l,sessionId:d,protocol:i,appId:f,lang:c,defaultLang:p,subdomain:s[Math.abs(u[0]+u[1])%s.length],request:encodeURIComponent(r.encode(h.finish()))})}function y(e,r){var t=e.coords,o=r.coords,n=t[2],i=o[2];return n===i?t[0]===o[0]&&t[1]===o[1]:n<i?T(e,r):T(r,e)}function T(e,r){if(r.zoomLevel<e.zoomLevel)return!1;if(r.zoomLevel===e.zoomLevel)return r.coords[0]===e.coords[1]&&r.coords[1]===e.coords[1]&&r.detailLevel>e.detailLevel;var t=Math.pow(2,r.coords[2]-e.coords[2]),o=e.coords[0]*t,n=o+t,i=e.coords[1]*t,a=i+t,s=r.coords[0],u=r.coords[1];return s>=o&&s<n&&u>=i&&u<a}function I(e,r,t){var o=e.coords,n=Math.min(r,t),i=Math.pow(2,e.zoomLevel-n);return c([Math.floor(o[0]/i),Math.floor(o[1]/i),n,r])}function b(e,r,t,o){return e[I(r,t,o)]}function w(e,r){var t=[];for(var o in e){var n=e[o];T(r,n)&&t.push(n)}return t}function P(r,t,o){return e.distance(r,(0,i.tileCenterToMapPoint)(t.coords))-e.distance(r,(0,i.tileCenterToMapPoint)(o.coords))}function _(e,r){return e[1]-r[1]||e[0]-r[0]}function z(e,r){if(e.length!==r.length)return!1;for(var t=0;t<e.length;t++){var o=e[t],n=r[t];if(o[0]!==n[0]||o[1]!==n[1])return!1}return!0}function q(e,r){for(var t=[],o=0;o<e.length;o++){var n=e[o];r.has(n)&&t.push(n)}return t}var C=1,L=65535;function O(e){return e>=C&&e<=L}
},{"@2gis/gl-matrix/vec2":"QsKn","base64-arraybuffer":"QVok","pbf":"QftS","./metatile":"RE1d","./common":"NsaN","./geo":"DFqc","./pbfSchemes/server.proto":"NjwQ"}],"UnXq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.generateTile=exports.getCoords=exports.now=void 0;var e=function(){return performance.now()};function r(e){return e.modules.tileManager.getViewportTiles().map(function(e){return e.coords})}function o(e,r){return e.modules.tileManager.regionalTileLayer.sourceCore.generateTile(e.state,r,[],2,{})}exports.now=e,exports.getCoords=r,exports.generateTile=o;
},{}],"SeX5":[function(require,module,exports) {
"use strict";var e=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(a,s){function l(e){try{c(n.next(e))}catch(t){s(t)}}function o(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(l,o)}c((n=n.apply(e,t||[])).next())})},t=this&&this.__generator||function(e,t){var r,n,a,s,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,n&&(a=2&s[0]?n.return:s[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,s[1])).done)return a;switch(n=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return l.label++,{value:s[1],done:!1};case 5:l.label++,n=s[1],s=[0];continue;case 7:s=l.ops.pop(),l.trys.pop();continue;default:if(!(a=(a=l.trys).length>0&&a[a.length-1])&&(6===s[0]||2===s[0])){l=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){l.label=s[1];break}if(6===s[0]&&l.label<a[1]){l.label=a[1],a=s;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(s);break}a[2]&&l.ops.pop(),l.trys.pop();continue}s=t.call(e,l)}catch(o){s=[6,o],n=0}finally{r=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.measureLabeling=void 0;var r=require("@webmaps/jakarta/dist/es6/config"),n=require("@webmaps/jakarta/dist/es6/utils/tiles"),a=require("../stats"),s=require("../utils"),l=function(e){return new Promise(function(t){return setTimeout(t,e)})};function o(o){return e(this,void 0,void 0,function(){function e(e){e.results.forEach(function(e){var t=e.metatileHash,r=e.collectorOutput,n=e.styleId,a=r.labels;u[String(i++)]={metatileHash:t,labels:a,styleId:n}})}var c,i,u,b,f,p,h,d,w,m,y,v,g,L,k,x,P,_,j,O,T,q,I,S;return t(this,function(t){switch(t.label){case 0:return c=100,i=0,u={},b=(0,s.getCoords)(o),[4,Promise.all(b.map(function(t){return(0,s.generateTile)(o,t).then(e)}))];case 1:t.sent(),f={addLabels:[],processLabels:[],secondProcessLabels:[],removeLabels:[]},p=0,t.label=2;case 2:if(!(p<c))return[3,21];for(y in h=[],d=o.modules.labeler,w=(0,s.now)(),m=[],u)m.push(y);v=0,t.label=3;case 3:return v<m.length?(I=m[v],g=u[I],[4,d.worker.appendLabels(I,0,[g])]):[3,6];case 4:t.sent(),d.activeLabelKeys.push(I),t.label=5;case 5:return v++,[3,3];case 6:return f.addLabels.push((0,s.now)()-w),[4,l(100)];case 7:t.sent(),w=(0,s.now)(),L=0,k=b,t.label=8;case 8:return L<k.length?(_=k[L],[4,o.modules.labeler.worker.processLabels(Object.keys(u),o.state,(0,n.createTileInfo)(_),1,[],r.labeling.commercialMargins,!1)]):[3,11];case 9:j=t.sent(),h.push(j),t.label=10;case 10:return L++,[3,8];case 11:f.processLabels.push((0,s.now)()-w),w=(0,s.now)(),x=0,P=b,t.label=12;case 12:return x<P.length?(_=P[x],[4,o.modules.labeler.worker.processLabels(Object.keys(u),o.state,(0,n.createTileInfo)(_),1,[],r.labeling.commercialMargins,!1)]):[3,15];case 13:j=t.sent(),h.push(j),t.label=14;case 14:return x++,[3,12];case 15:for(T in f.secondProcessLabels.push((0,s.now)()-w),w=(0,s.now)(),O=[],u)O.push(T);q=0,t.label=16;case 16:return q<O.length?(I=O[q],[4,d.worker.removeLabels(I)]):[3,19];case 17:t.sent(),-1!==(S=d.activeLabelKeys.indexOf(I))&&d.activeLabelKeys.splice(S,1),t.label=18;case 18:return q++,[3,16];case 19:f.removeLabels.push((0,s.now)()-w),t.label=20;case 20:return p++,[3,2];case 21:return[2,(0,a.keyedStats)(f)]}})})}exports.measureLabeling=o;
},{"@webmaps/jakarta/dist/es6/config":"xX11","@webmaps/jakarta/dist/es6/utils/tiles":"AxmI","../stats":"Epnx","../utils":"UnXq"}],"PsmS":[function(require,module,exports) {
"use strict";var e=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function a(e){try{s(n.next(e))}catch(t){i(t)}}function u(e){try{s(n.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,u)}s((n=n.apply(e,t||[])).next())})},t=this&&this.__generator||function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(u){i=[6,u],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.measureParser=void 0;var r=require("../stats"),n=require("../utils");function o(o){return e(this,void 0,void 0,function(){var e,a,u,s,c;return t(this,function(t){switch(t.label){case 0:e=100,a={viewport:[],tile:[]},u=(0,n.getCoords)(o),s=0,t.label=1;case 1:return s<e?(c=(0,n.now)(),[4,Promise.all(u.map(function(e){return i(o,e,a.tile)}))]):[3,4];case 2:t.sent(),a.viewport.push((0,n.now)()-c),t.label=3;case 3:return s++,[3,1];case 4:return[2,(0,r.keyedStats)(a)]}})})}function i(r,o,i){return e(this,void 0,void 0,function(){var e;return t(this,function(t){switch(t.label){case 0:return e=(0,n.now)(),[4,(0,n.generateTile)(r,o)];case 1:return t.sent(),i.push((0,n.now)()-e),[2]}})})}exports.measureParser=o;
},{"../stats":"Epnx","../utils":"UnXq"}],"nQ8B":[function(require,module,exports) {
var define;
var e;parcelRequire=function(t,n,o,i){var r,a="function"==typeof parcelRequire&&parcelRequire,s="function"==typeof require&&require;function l(e,o){if(!n[e]){if(!t[e]){var i="function"==typeof parcelRequire&&parcelRequire;if(!o&&i)return i(e,!0);if(a)return a(e,!0);if(s&&"string"==typeof e)return s(e);var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}d.resolve=function(n){return t[e][1][n]||n},d.cache={};var c=n[e]=new l.Module(e);t[e][0].call(c.exports,d,c,c.exports,this)}return n[e].exports;function d(e){return l(d.resolve(e))}}l.isParcelRequire=!0,l.Module=function(e){this.id=e,this.bundle=l,this.exports={}},l.modules=t,l.cache=n,l.parent=a,l.register=function(e,n){t[e]=[function(e,t){t.exports=n},{}]};for(var c=0;c<o.length;c++)try{l(o[c])}catch(t){r||(r=t)}if(o.length){var d=l(o[o.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=d:"function"==typeof e&&e.amd&&e(function(){return d})}if(parcelRequire=l,r)throw r;return l}({KkZG:[function(e,t,n){"use strict";function o(e,t){var n=e.__state.conversionName.toString(),o=Math.round(e.r),i=Math.round(e.g),r=Math.round(e.b),a=e.a,s=Math.round(e.h),l=e.s.toFixed(1),c=e.v.toFixed(1);if(t||"THREE_CHAR_HEX"===n||"SIX_CHAR_HEX"===n){for(var d=e.hex.toString(16);d.length<6;)d="0"+d;return"#"+d}return"CSS_RGB"===n?"rgb("+o+","+i+","+r+")":"CSS_RGBA"===n?"rgba("+o+","+i+","+r+","+a+")":"HEX"===n?"0x"+e.hex.toString(16):"RGB_ARRAY"===n?"["+o+","+i+","+r+"]":"RGBA_ARRAY"===n?"["+o+","+i+","+r+","+a+"]":"RGB_OBJ"===n?"{r:"+o+",g:"+i+",b:"+r+"}":"RGBA_OBJ"===n?"{r:"+o+",g:"+i+",b:"+r+",a:"+a+"}":"HSV_OBJ"===n?"{h:"+s+",s:"+l+",v:"+c+"}":"HSVA_OBJ"===n?"{h:"+s+",s:"+l+",v:"+c+",a:"+a+"}":"unknown format"}Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.GUI=n.gui=n.dom=n.controllers=n.color=void 0;var i=Array.prototype.forEach,r=Array.prototype.slice,a={BREAK:{},extend:function(e){return this.each(r.call(arguments,1),function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(n){this.isUndefined(t[n])||(e[n]=t[n])}.bind(this))},this),e},defaults:function(e){return this.each(r.call(arguments,1),function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(n){this.isUndefined(e[n])&&(e[n]=t[n])}.bind(this))},this),e},compose:function(){var e=r.call(arguments);return function(){for(var t=r.call(arguments),n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},each:function(e,t,n){if(e)if(i&&e.forEach&&e.forEach===i)e.forEach(t,n);else if(e.length===e.length+0){var o,r=void 0;for(r=0,o=e.length;r<o;r++)if(r in e&&t.call(n,e[r],r)===this.BREAK)return}else for(var a in e)if(t.call(n,e[a],a)===this.BREAK)return},defer:function(e){setTimeout(e,0)},debounce:function(e,t,n){var o=void 0;return function(){var i=this,r=arguments,a=n||!o;clearTimeout(o),o=setTimeout(function(){o=null,n||e.apply(i,r)},t),a&&e.apply(i,r)}},toArray:function(e){return e.toArray?e.toArray():r.call(e)},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isNaN:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return isNaN(e)}),isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return!1===e||!0===e},isFunction:function(e){return e instanceof Function}},s=[{litmus:a.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString(),0)}},write:o},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString(),0)}},write:o},CSS_RGB:{read:function(e){var t=e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:o},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:o}}},{litmus:a.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:a.isArray,conversions:{RGB_ARRAY:{read:function(e){return 3===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return 4===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:a.isObject,conversions:{RGBA_OBJ:{read:function(e){return!!(a.isNumber(e.r)&&a.isNumber(e.g)&&a.isNumber(e.b)&&a.isNumber(e.a))&&{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return!!(a.isNumber(e.r)&&a.isNumber(e.g)&&a.isNumber(e.b))&&{space:"RGB",r:e.r,g:e.g,b:e.b}},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return!!(a.isNumber(e.h)&&a.isNumber(e.s)&&a.isNumber(e.v)&&a.isNumber(e.a))&&{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return!!(a.isNumber(e.h)&&a.isNumber(e.s)&&a.isNumber(e.v))&&{space:"HSV",h:e.h,s:e.s,v:e.v}},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}],l=void 0,c=void 0,d=function(){c=!1;var e=arguments.length>1?a.toArray(arguments):arguments[0];return a.each(s,function(t){if(t.litmus(e))return a.each(t.conversions,function(t,n){if(l=t.read(e),!1===c&&!1!==l)return c=l,l.conversionName=n,l.conversion=t,a.BREAK}),a.BREAK}),c},u=void 0,h={hsv_to_rgb:function(e,t,n){var o=Math.floor(e/60)%6,i=e/60-Math.floor(e/60),r=n*(1-t),a=n*(1-i*t),s=n*(1-(1-i)*t),l=[[n,s,r],[a,n,r],[r,n,s],[r,a,n],[s,r,n],[n,r,a]][o];return{r:255*l[0],g:255*l[1],b:255*l[2]}},rgb_to_hsv:function(e,t,n){var o=Math.min(e,t,n),i=Math.max(e,t,n),r=i-o,a=void 0;return 0===i?{h:NaN,s:0,v:0}:(a=e===i?(t-n)/r:t===i?2+(n-e)/r:4+(e-t)/r,(a/=6)<0&&(a+=1),{h:360*a,s:r/i,v:i/255})},rgb_to_hex:function(e,t,n){var o=this.hex_with_component(0,2,e);return o=this.hex_with_component(o,1,t),this.hex_with_component(o,0,n)},component_from_hex:function(e,t){return e>>8*t&255},hex_with_component:function(e,t,n){return n<<(u=8*t)|e&~(255<<u)}},_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},p=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),m=function e(t,n,o){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,o)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(o):void 0},b=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},g=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},v=function(){function e(){if(f(this,e),this.__state=d.apply(this,arguments),!1===this.__state)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return p(e,[{key:"toString",value:function(){return o(this)}},{key:"toHexString",value:function(){return o(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),e}();function y(e,t,n){Object.defineProperty(e,t,{get:function(){return"RGB"===this.__state.space?this.__state[t]:(v.recalculateRGB(this,t,n),this.__state[t])},set:function(e){"RGB"!==this.__state.space&&(v.recalculateRGB(this,t,n),this.__state.space="RGB"),this.__state[t]=e}})}function w(e,t){Object.defineProperty(e,t,{get:function(){return"HSV"===this.__state.space?this.__state[t]:(v.recalculateHSV(this),this.__state[t])},set:function(e){"HSV"!==this.__state.space&&(v.recalculateHSV(this),this.__state.space="HSV"),this.__state[t]=e}})}v.recalculateRGB=function(e,t,n){if("HEX"===e.__state.space)e.__state[t]=h.component_from_hex(e.__state.hex,n);else{if("HSV"!==e.__state.space)throw new Error("Corrupted color state");a.extend(e.__state,h.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v))}},v.recalculateHSV=function(e){var t=h.rgb_to_hsv(e.r,e.g,e.b);a.extend(e.__state,{s:t.s,v:t.v}),a.isNaN(t.h)?a.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=t.h},v.COMPONENTS=["r","g","b","h","s","v","hex","a"],y(v.prototype,"r",2),y(v.prototype,"g",1),y(v.prototype,"b",0),w(v.prototype,"h"),w(v.prototype,"s"),w(v.prototype,"v"),Object.defineProperty(v.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(v.prototype,"hex",{get:function(){return"HEX"!==this.__state.space&&(this.__state.hex=h.rgb_to_hex(this.r,this.g,this.b),this.__state.space="HEX"),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}});var x=function(){function e(t,n){f(this,e),this.initialValue=t[n],this.domElement=document.createElement("div"),this.object=t,this.property=n,this.__onChange=void 0,this.__onFinishChange=void 0}return p(e,[{key:"onChange",value:function(e){return this.__onChange=e,this}},{key:"onFinishChange",value:function(e){return this.__onFinishChange=e,this}},{key:"setValue",value:function(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),e}(),E={};a.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},function(e,t){a.each(e,function(e){E[e]=t})});var A=/(\d+(\.\d+)?)px/;function C(e){if("0"===e||a.isUndefined(e))return 0;var t=e.match(A);return a.isNull(t)?0:parseFloat(t[1])}var k={makeSelectable:function(e,t){void 0!==e&&void 0!==e.style&&(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off")},makeFullscreen:function(e,t,n){var o=n,i=t;a.isUndefined(i)&&(i=!0),a.isUndefined(o)&&(o=!0),e.style.position="absolute",i&&(e.style.left=0,e.style.right=0),o&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(e,t,n,o){var i=n||{},r=E[t];if(!r)throw new Error("Event type "+t+" not supported.");var s=document.createEvent(r);switch(r){case"MouseEvents":var l=i.x||i.clientX||0,c=i.y||i.clientY||0;s.initMouseEvent(t,i.bubbles||!1,i.cancelable||!0,window,i.clickCount||1,0,0,l,c,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var d=s.initKeyboardEvent||s.initKeyEvent;a.defaults(i,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),d(t,i.bubbles||!1,i.cancelable,window,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.keyCode,i.charCode);break;default:s.initEvent(t,i.bubbles||!1,i.cancelable||!0)}a.defaults(s,o),e.dispatchEvent(s)},bind:function(e,t,n,o){var i=o||!1;return e.addEventListener?e.addEventListener(t,n,i):e.attachEvent&&e.attachEvent("on"+t,n),k},unbind:function(e,t,n,o){var i=o||!1;return e.removeEventListener?e.removeEventListener(t,n,i):e.detachEvent&&e.detachEvent("on"+t,n),k},addClass:function(e,t){if(void 0===e.className)e.className=t;else if(e.className!==t){var n=e.className.split(/ +/);-1===n.indexOf(t)&&(n.push(t),e.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return k},removeClass:function(e,t){if(t)if(e.className===t)e.removeAttribute("class");else{var n=e.className.split(/ +/),o=n.indexOf(t);-1!==o&&(n.splice(o,1),e.className=n.join(" "))}else e.className=void 0;return k},hasClass:function(e,t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||!1},getWidth:function(e){var t=getComputedStyle(e);return C(t["border-left-width"])+C(t["border-right-width"])+C(t["padding-left"])+C(t["padding-right"])+C(t.width)},getHeight:function(e){var t=getComputedStyle(e);return C(t["border-top-width"])+C(t["border-bottom-width"])+C(t["padding-top"])+C(t["padding-bottom"])+C(t.height)},getOffset:function(e){var t=e,n={left:0,top:0};if(t.offsetParent)do{n.left+=t.offsetLeft,n.top+=t.offsetTop,t=t.offsetParent}while(t);return n},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}},S=function(e){function t(e,n){f(this,t);var o=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),i=o;return o.__prev=o.getValue(),o.__checkbox=document.createElement("input"),o.__checkbox.setAttribute("type","checkbox"),k.bind(o.__checkbox,"change",function(){i.setValue(!i.__prev)},!1),o.domElement.appendChild(o.__checkbox),o.updateDisplay(),o}return b(t,x),p(t,[{key:"setValue",value:function(e){var n=m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),n}},{key:"updateDisplay",value:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(),O=function(e){function t(e,n,o){f(this,t);var i=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),r=o,s=i;if(i.__select=document.createElement("select"),a.isArray(r)){var l={};a.each(r,function(e){l[e]=e}),r=l}return a.each(r,function(e,t){var n=document.createElement("option");n.innerHTML=t,n.setAttribute("value",e),s.__select.appendChild(n)}),i.updateDisplay(),k.bind(i.__select,"change",function(){var e=this.options[this.selectedIndex].value;s.setValue(e)}),i.domElement.appendChild(i.__select),i}return b(t,x),p(t,[{key:"setValue",value:function(e){var n=m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),n}},{key:"updateDisplay",value:function(){return k.isActive(this.__select)?this:(this.__select.value=this.getValue(),m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this))}}]),t}(),R=function(e){function t(e,n){f(this,t);var o=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),i=o;function r(){i.setValue(i.__input.value)}return o.__input=document.createElement("input"),o.__input.setAttribute("type","text"),k.bind(o.__input,"keyup",r),k.bind(o.__input,"change",r),k.bind(o.__input,"blur",function(){i.__onFinishChange&&i.__onFinishChange.call(i,i.getValue())}),k.bind(o.__input,"keydown",function(e){13===e.keyCode&&this.blur()}),o.updateDisplay(),o.domElement.appendChild(o.__input),o}return b(t,x),p(t,[{key:"updateDisplay",value:function(){return k.isActive(this.__input)||(this.__input.value=this.getValue()),m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}();function T(e){var t=e.toString();return t.indexOf(".")>-1?t.length-t.indexOf(".")-1:0}var L=function(e){function t(e,n,o){f(this,t);var i=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),r=o||{};return i.__min=r.min,i.__max=r.max,i.__step=r.step,a.isUndefined(i.__step)?0===i.initialValue?i.__impliedStep=1:i.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(i.initialValue))/Math.LN10))/10:i.__impliedStep=i.__step,i.__precision=T(i.__impliedStep),i}return b(t,x),p(t,[{key:"setValue",value:function(e){var n=e;return void 0!==this.__min&&n<this.__min?n=this.__min:void 0!==this.__max&&n>this.__max&&(n=this.__max),void 0!==this.__step&&n%this.__step!=0&&(n=Math.round(n/this.__step)*this.__step),m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,n)}},{key:"min",value:function(e){return this.__min=e,this}},{key:"max",value:function(e){return this.__max=e,this}},{key:"step",value:function(e){return this.__step=e,this.__impliedStep=e,this.__precision=T(e),this}}]),t}();var B=function(e){function t(e,n,o){f(this,t);var i=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,o));i.__truncationSuspended=!1;var r=i,s=void 0;function l(){r.__onFinishChange&&r.__onFinishChange.call(r,r.getValue())}function c(e){var t=s-e.clientY;r.setValue(r.getValue()+t*r.__impliedStep),s=e.clientY}function d(){k.unbind(window,"mousemove",c),k.unbind(window,"mouseup",d),l()}return i.__input=document.createElement("input"),i.__input.setAttribute("type","text"),k.bind(i.__input,"change",function(){var e=parseFloat(r.__input.value);a.isNaN(e)||r.setValue(e)}),k.bind(i.__input,"blur",function(){l()}),k.bind(i.__input,"mousedown",function(e){k.bind(window,"mousemove",c),k.bind(window,"mouseup",d),s=e.clientY}),k.bind(i.__input,"keydown",function(e){13===e.keyCode&&(r.__truncationSuspended=!0,this.blur(),r.__truncationSuspended=!1,l())}),i.updateDisplay(),i.domElement.appendChild(i.__input),i}return b(t,L),p(t,[{key:"updateDisplay",value:function(){return this.__input.value=this.__truncationSuspended?this.getValue():function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n}(this.getValue(),this.__precision),m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}();function P(e,t,n,o,i){return o+(e-t)/(n-t)*(i-o)}var N=function(e){function t(e,n,o,i,r){f(this,t);var a=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,{min:o,max:i,step:r})),s=a;function l(e){e.preventDefault();var t=s.__background.getBoundingClientRect();return s.setValue(P(e.clientX,t.left,t.right,s.__min,s.__max)),!1}function c(){k.unbind(window,"mousemove",l),k.unbind(window,"mouseup",c),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}function d(e){var t=e.touches[0].clientX,n=s.__background.getBoundingClientRect();s.setValue(P(t,n.left,n.right,s.__min,s.__max))}function u(){k.unbind(window,"touchmove",d),k.unbind(window,"touchend",u),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}return a.__background=document.createElement("div"),a.__foreground=document.createElement("div"),k.bind(a.__background,"mousedown",function(e){document.activeElement.blur(),k.bind(window,"mousemove",l),k.bind(window,"mouseup",c),l(e)}),k.bind(a.__background,"touchstart",function(e){1===e.touches.length&&(k.bind(window,"touchmove",d),k.bind(window,"touchend",u),d(e))}),k.addClass(a.__background,"slider"),k.addClass(a.__foreground,"slider-fg"),a.updateDisplay(),a.__background.appendChild(a.__foreground),a.domElement.appendChild(a.__background),a}return b(t,L),p(t,[{key:"updateDisplay",value:function(){var e=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*e+"%",m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(),j=function(e){function t(e,n,o){f(this,t);var i=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),r=i;return i.__button=document.createElement("div"),i.__button.innerHTML=void 0===o?"Fire":o,k.bind(i.__button,"click",function(e){return e.preventDefault(),r.fire(),!1}),k.addClass(i.__button,"button"),i.domElement.appendChild(i.__button),i}return b(t,x),p(t,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),t}(),H=function(e){function t(e,n){f(this,t);var o=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));o.__color=new v(o.getValue()),o.__temp=new v(0);var i=o;o.domElement=document.createElement("div"),k.makeSelectable(o.domElement,!1),o.__selector=document.createElement("div"),o.__selector.className="selector",o.__saturation_field=document.createElement("div"),o.__saturation_field.className="saturation-field",o.__field_knob=document.createElement("div"),o.__field_knob.className="field-knob",o.__field_knob_border="2px solid ",o.__hue_knob=document.createElement("div"),o.__hue_knob.className="hue-knob",o.__hue_field=document.createElement("div"),o.__hue_field.className="hue-field",o.__input=document.createElement("input"),o.__input.type="text",o.__input_textShadow="0 1px 1px ",k.bind(o.__input,"keydown",function(e){13===e.keyCode&&h.call(this)}),k.bind(o.__input,"blur",h),k.bind(o.__selector,"mousedown",function(){k.addClass(this,"drag").bind(window,"mouseup",function(){k.removeClass(i.__selector,"drag")})}),k.bind(o.__selector,"touchstart",function(){k.addClass(this,"drag").bind(window,"touchend",function(){k.removeClass(i.__selector,"drag")})});var r=document.createElement("div");function s(e){p(e),k.bind(window,"mousemove",p),k.bind(window,"touchmove",p),k.bind(window,"mouseup",c),k.bind(window,"touchend",c)}function l(e){m(e),k.bind(window,"mousemove",m),k.bind(window,"touchmove",m),k.bind(window,"mouseup",u),k.bind(window,"touchend",u)}function c(){k.unbind(window,"mousemove",p),k.unbind(window,"touchmove",p),k.unbind(window,"mouseup",c),k.unbind(window,"touchend",c),_()}function u(){k.unbind(window,"mousemove",m),k.unbind(window,"touchmove",m),k.unbind(window,"mouseup",u),k.unbind(window,"touchend",u),_()}function h(){var e=d(this.value);!1!==e?(i.__color.__state=e,i.setValue(i.__color.toOriginal())):this.value=i.__color.toString()}function _(){i.__onFinishChange&&i.__onFinishChange.call(i,i.__color.toOriginal())}function p(e){-1===e.type.indexOf("touch")&&e.preventDefault();var t=i.__saturation_field.getBoundingClientRect(),n=e.touches&&e.touches[0]||e,o=n.clientX,r=n.clientY,a=(o-t.left)/(t.right-t.left),s=1-(r-t.top)/(t.bottom-t.top);return s>1?s=1:s<0&&(s=0),a>1?a=1:a<0&&(a=0),i.__color.v=s,i.__color.s=a,i.setValue(i.__color.toOriginal()),!1}function m(e){-1===e.type.indexOf("touch")&&e.preventDefault();var t=i.__hue_field.getBoundingClientRect(),n=1-((e.touches&&e.touches[0]||e).clientY-t.top)/(t.bottom-t.top);return n>1?n=1:n<0&&(n=0),i.__color.h=360*n,i.setValue(i.__color.toOriginal()),!1}return a.extend(o.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),a.extend(o.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:o.__field_knob_border+(o.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),a.extend(o.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),a.extend(o.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),a.extend(r.style,{width:"100%",height:"100%",background:"none"}),D(r,"top","rgba(0,0,0,0)","#000"),a.extend(o.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),function(e){e.style.background="",e.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",e.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}(o.__hue_field),a.extend(o.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:o.__input_textShadow+"rgba(0,0,0,0.7)"}),k.bind(o.__saturation_field,"mousedown",s),k.bind(o.__saturation_field,"touchstart",s),k.bind(o.__field_knob,"mousedown",s),k.bind(o.__field_knob,"touchstart",s),k.bind(o.__hue_field,"mousedown",l),k.bind(o.__hue_field,"touchstart",l),o.__saturation_field.appendChild(r),o.__selector.appendChild(o.__field_knob),o.__selector.appendChild(o.__saturation_field),o.__selector.appendChild(o.__hue_field),o.__hue_field.appendChild(o.__hue_knob),o.domElement.appendChild(o.__input),o.domElement.appendChild(o.__selector),o.updateDisplay(),o}return b(t,x),p(t,[{key:"updateDisplay",value:function(){var e=d(this.getValue());if(!1!==e){var t=!1;a.each(v.COMPONENTS,function(n){if(!a.isUndefined(e[n])&&!a.isUndefined(this.__color.__state[n])&&e[n]!==this.__color.__state[n])return t=!0,{}},this),t&&a.extend(this.__color.__state,e)}a.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var n=this.__color.v<.5||this.__color.s>.5?255:0,o=255-n;a.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+n+","+n+","+n+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,D(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),a.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+n+","+n+","+n+")",textShadow:this.__input_textShadow+"rgba("+o+","+o+","+o+",.7)"})}}]),t}(),F=["-moz-","-o-","-webkit-","-ms-",""];function D(e,t,n,o){e.style.background="",a.each(F,function(i){e.style.cssText+="background: "+i+"linear-gradient("+t+", "+n+" 0%, "+o+" 100%); "})}var I=function(e,t){var n=t||document,o=document.createElement("style");o.type="text/css",o.innerHTML=e;var i=n.getElementsByTagName("head")[0];try{i.appendChild(o)}catch(s){}},M=function(e,t){var n=e[t];return a.isArray(arguments[2])||a.isObject(arguments[2])?new O(e,t,arguments[2]):a.isNumber(n)?a.isNumber(arguments[2])&&a.isNumber(arguments[3])?a.isNumber(arguments[4])?new N(e,t,arguments[2],arguments[3],arguments[4]):new N(e,t,arguments[2],arguments[3]):a.isNumber(arguments[4])?new B(e,t,{min:arguments[2],max:arguments[3],step:arguments[4]}):new B(e,t,{min:arguments[2],max:arguments[3]}):a.isString(n)?new R(e,t):a.isFunction(n)?new j(e,t,""):a.isBoolean(n)?new S(e,t):null};var V=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)},z=function(){function e(){f(this,e),this.backgroundElement=document.createElement("div"),a.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),k.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),a.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var t=this;k.bind(this.backgroundElement,"click",function(){t.hide()})}return p(e,[{key:"show",value:function(){var e=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),a.defer(function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform="scale(1)"})}},{key:"hide",value:function(){var e=this,t=function t(){e.domElement.style.display="none",e.backgroundElement.style.display="none",k.unbind(e.domElement,"webkitTransitionEnd",t),k.unbind(e.domElement,"transitionend",t),k.unbind(e.domElement,"oTransitionEnd",t)};k.bind(this.domElement,"webkitTransitionEnd",t),k.bind(this.domElement,"transitionend",t),k.bind(this.domElement,"oTransitionEnd",t),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-k.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-k.getHeight(this.domElement)/2+"px"}}]),e}();I(function(e){if(e&&"undefined"!=typeof window){var t=document.createElement("style");return t.setAttribute("type","text/css"),t.innerHTML=e,document.head.appendChild(t),e}}(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n"));var U="Default",G=function(){try{return!!window.localStorage}catch(e){return!1}}(),X=void 0,K=!0,Y=void 0,Q=!1,J=[],W=function e(t){var n=this,o=t||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),k.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],o=a.defaults(o,{closeOnTop:!1,autoPlace:!0,width:e.DEFAULT_WIDTH}),o=a.defaults(o,{resizable:o.autoPlace,hideable:o.autoPlace}),a.isUndefined(o.load)?o.load={preset:U}:o.preset&&(o.load.preset=o.preset),a.isUndefined(o.parent)&&o.hideable&&J.push(this),o.resizable=a.isUndefined(o.parent)&&o.resizable,o.autoPlace&&a.isUndefined(o.scrollable)&&(o.scrollable=!0);var i,r=G&&"true"===localStorage.getItem(oe(this,"isLocal")),s=void 0,l=void 0;if(Object.defineProperties(this,{parent:{get:function(){return o.parent}},scrollable:{get:function(){return o.scrollable}},autoPlace:{get:function(){return o.autoPlace}},closeOnTop:{get:function(){return o.closeOnTop}},preset:{get:function(){return n.parent?n.getRoot().preset:o.load.preset},set:function(e){n.parent?n.getRoot().preset=e:o.load.preset=e,function(e){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].value===e.preset&&(e.__preset_select.selectedIndex=t)}(this),n.revert()}},width:{get:function(){return o.width},set:function(e){o.width=e,ae(n,e)}},name:{get:function(){return o.name},set:function(e){o.name=e,l&&(l.innerHTML=o.name)}},closed:{get:function(){return o.closed},set:function(t){o.closed=t,o.closed?k.addClass(n.__ul,e.CLASS_CLOSED):k.removeClass(n.__ul,e.CLASS_CLOSED),this.onResize(),n.__closeButton&&(n.__closeButton.innerHTML=t?e.TEXT_OPEN:e.TEXT_CLOSED)}},load:{get:function(){return o.load}},useLocalStorage:{get:function(){return r},set:function(e){G&&(r=e,e?k.bind(window,"unload",s):k.unbind(window,"unload",s),localStorage.setItem(oe(n,"isLocal"),e))}}}),a.isUndefined(o.parent)){if(this.closed=o.closed||!1,k.addClass(this.domElement,e.CLASS_MAIN),k.makeSelectable(this.domElement,!1),G&&r){n.useLocalStorage=!0;var c=localStorage.getItem(oe(this,"gui"));c&&(o.load=JSON.parse(c))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=e.TEXT_CLOSED,k.addClass(this.__closeButton,e.CLASS_CLOSE_BUTTON),o.closeOnTop?(k.addClass(this.__closeButton,e.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(k.addClass(this.__closeButton,e.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),k.bind(this.__closeButton,"click",function(){n.closed=!n.closed})}else{void 0===o.closed&&(o.closed=!0);var d=document.createTextNode(o.name);k.addClass(d,"controller-name"),l=q(n,d),k.addClass(this.__ul,e.CLASS_CLOSED),k.addClass(l,"title"),k.bind(l,"click",function(e){return e.preventDefault(),n.closed=!n.closed,!1}),o.closed||(this.closed=!1)}o.autoPlace&&(a.isUndefined(o.parent)&&(K&&(Y=document.createElement("div"),k.addClass(Y,"dg"),k.addClass(Y,e.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(Y),K=!1),Y.appendChild(this.domElement),k.addClass(this.domElement,e.CLASS_AUTO_PLACE)),this.parent||ae(n,o.width)),this.__resizeHandler=function(){n.onResizeDebounced()},k.bind(window,"resize",this.__resizeHandler),k.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),k.bind(this.__ul,"transitionend",this.__resizeHandler),k.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),o.resizable&&function(e){var t=void 0;function n(n){return n.preventDefault(),e.width+=t-n.clientX,e.onResize(),t=n.clientX,!1}function o(){k.removeClass(e.__closeButton,W.CLASS_DRAG),k.unbind(window,"mousemove",n),k.unbind(window,"mouseup",o)}function i(i){return i.preventDefault(),t=i.clientX,k.addClass(e.__closeButton,W.CLASS_DRAG),k.bind(window,"mousemove",n),k.bind(window,"mouseup",o),!1}e.__resize_handle=document.createElement("div"),a.extend(e.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),k.bind(e.__resize_handle,"mousedown",i),k.bind(e.__closeButton,"mousedown",i),e.domElement.insertBefore(e.__resize_handle,e.domElement.firstElementChild)}(this),s=function(){G&&"true"===localStorage.getItem(oe(n,"isLocal"))&&localStorage.setItem(oe(n,"gui"),JSON.stringify(n.getSaveObject()))},this.saveToLocalStorageIfPossible=s,o.parent||((i=n.getRoot()).width+=1,a.defer(function(){i.width-=1}))};function q(e,t,n){var o=document.createElement("li");return t&&o.appendChild(t),n?e.__ul.insertBefore(o,n):e.__ul.appendChild(o),e.onResize(),o}function Z(e){k.unbind(window,"resize",e.__resizeHandler),e.saveToLocalStorageIfPossible&&k.unbind(window,"unload",e.saveToLocalStorageIfPossible)}function $(e,t){var n=e.__preset_select[e.__preset_select.selectedIndex];n.innerHTML=t?n.value+"*":n.value}function ee(e,t,n){if(n.__li=t,n.__gui=e,a.extend(n,{options:function(t){if(arguments.length>1){var o=n.__li.nextElementSibling;return n.remove(),ne(e,n.object,n.property,{before:o,factoryArgs:[a.toArray(arguments)]})}if(a.isArray(t)||a.isObject(t)){var i=n.__li.nextElementSibling;return n.remove(),ne(e,n.object,n.property,{before:i,factoryArgs:[t]})}},name:function(e){return n.__li.firstElementChild.firstElementChild.innerHTML=e,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof N){var o=new B(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});a.each(["updateDisplay","onChange","onFinishChange","step","min","max"],function(e){var t=n[e],i=o[e];n[e]=o[e]=function(){var e=Array.prototype.slice.call(arguments);return i.apply(o,e),t.apply(n,e)}}),k.addClass(t,"has-slider"),n.domElement.insertBefore(o.domElement,n.domElement.firstElementChild)}else if(n instanceof B){var i=function(t){if(a.isNumber(n.__min)&&a.isNumber(n.__max)){var o=n.__li.firstElementChild.firstElementChild.innerHTML,i=n.__gui.__listening.indexOf(n)>-1;n.remove();var r=ne(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]});return r.name(o),i&&r.listen(),r}return t};n.min=a.compose(i,n.min),n.max=a.compose(i,n.max)}else n instanceof S?(k.bind(t,"click",function(){k.fakeEvent(n.__checkbox,"click")}),k.bind(n.__checkbox,"click",function(e){e.stopPropagation()})):n instanceof j?(k.bind(t,"click",function(){k.fakeEvent(n.__button,"click")}),k.bind(t,"mouseover",function(){k.addClass(n.__button,"hover")}),k.bind(t,"mouseout",function(){k.removeClass(n.__button,"hover")})):n instanceof H&&(k.addClass(t,"color"),n.updateDisplay=a.compose(function(e){return t.style.borderLeftColor=n.__color.toString(),e},n.updateDisplay),n.updateDisplay());n.setValue=a.compose(function(t){return e.getRoot().__preset_select&&n.isModified()&&$(e.getRoot(),!0),t},n.setValue)}function te(e,t){var n=e.getRoot(),o=n.__rememberedObjects.indexOf(t.object);if(-1!==o){var i=n.__rememberedObjectIndecesToControllers[o];if(void 0===i&&(i={},n.__rememberedObjectIndecesToControllers[o]=i),i[t.property]=t,n.load&&n.load.remembered){var r=n.load.remembered,a=void 0;if(r[e.preset])a=r[e.preset];else{if(!r[U])return;a=r[U]}if(a[o]&&void 0!==a[o][t.property]){var s=a[o][t.property];t.initialValue=s,t.setValue(s)}}}}function ne(e,t,n,o){if(void 0===t[n])throw new Error('Object "'+t+'" has no property "'+n+'"');var i=void 0;if(o.color)i=new H(t,n);else{var r=[t,n].concat(o.factoryArgs);i=M.apply(e,r)}o.before instanceof x&&(o.before=o.before.__li),te(e,i),k.addClass(i.domElement,"c");var a=document.createElement("span");k.addClass(a,"property-name"),a.innerHTML=i.property;var s=document.createElement("div");s.appendChild(a),s.appendChild(i.domElement);var l=q(e,s,o.before);return k.addClass(l,W.CLASS_CONTROLLER_ROW),i instanceof H?k.addClass(l,"color"):k.addClass(l,_(i.getValue())),ee(e,l,i),e.__controllers.push(i),i}function oe(e,t){return document.location.href+"."+t}function ie(e,t,n){var o=document.createElement("option");o.innerHTML=t,o.value=t,e.__preset_select.appendChild(o),n&&(e.__preset_select.selectedIndex=e.__preset_select.length-1)}function re(e,t){t.style.display=e.useLocalStorage?"block":"none"}function ae(e,t){e.domElement.style.width=t+"px",e.__save_row&&e.autoPlace&&(e.__save_row.style.width=t+"px"),e.__closeButton&&(e.__closeButton.style.width=t+"px")}function se(e,t){var n={};return a.each(e.__rememberedObjects,function(o,i){var r={},s=e.__rememberedObjectIndecesToControllers[i];a.each(s,function(e,n){r[n]=t?e.initialValue:e.getValue()}),n[i]=r}),n}W.toggleHide=function(){Q=!Q,a.each(J,function(e){e.domElement.style.display=Q?"none":""})},W.CLASS_AUTO_PLACE="a",W.CLASS_AUTO_PLACE_CONTAINER="ac",W.CLASS_MAIN="main",W.CLASS_CONTROLLER_ROW="cr",W.CLASS_TOO_TALL="taller-than-window",W.CLASS_CLOSED="closed",W.CLASS_CLOSE_BUTTON="close-button",W.CLASS_CLOSE_TOP="close-top",W.CLASS_CLOSE_BOTTOM="close-bottom",W.CLASS_DRAG="drag",W.DEFAULT_WIDTH=245,W.TEXT_CLOSED="Close Controls",W.TEXT_OPEN="Open Controls",W._keydownHandler=function(e){"text"===document.activeElement.type||72!==e.which&&72!==e.keyCode||W.toggleHide()},k.bind(window,"keydown",W._keydownHandler,!1),a.extend(W.prototype,{add:function(e,t){return ne(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return ne(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.splice(this.__controllers.indexOf(e),1);var t=this;a.defer(function(){t.onResize()})},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&Y.removeChild(this.domElement);var e=this;a.each(this.__folders,function(t){e.removeFolder(t)}),k.unbind(window,"keydown",W._keydownHandler,!1),Z(this)},addFolder:function(e){if(void 0!==this.__folders[e])throw new Error('You already have a folder in this GUI by the name "'+e+'"');var t={name:e,parent:this};t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]);var n=new W(t);this.__folders[e]=n;var o=q(this,n.domElement);return k.addClass(o,"folder"),n},removeFolder:function(e){this.__ul.removeChild(e.domElement.parentElement),delete this.__folders[e.name],this.load&&this.load.folders&&this.load.folders[e.name]&&delete this.load.folders[e.name],Z(e);var t=this;a.each(e.__folders,function(t){e.removeFolder(t)}),a.defer(function(){t.onResize()})},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=k.getOffset(e.__ul).top,n=0;a.each(e.__ul.childNodes,function(t){e.autoPlace&&t===e.__save_row||(n+=k.getHeight(t))}),window.innerHeight-t-20<n?(k.addClass(e.domElement,W.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-20+"px"):(k.removeClass(e.domElement,W.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&a.defer(function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"}),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},onResizeDebounced:a.debounce(function(){this.onResize()},50),remember:function(){if(a.isUndefined(X)&&((X=new z).domElement.innerHTML='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>'),this.parent)throw new Error("You can only call remember on a top level GUI.");var e=this;a.each(Array.prototype.slice.call(arguments),function(t){0===e.__rememberedObjects.length&&function(e){var t=e.__save_row=document.createElement("li");k.addClass(e.domElement,"has-save"),e.__ul.insertBefore(t,e.__ul.firstChild),k.addClass(t,"save-row");var n=document.createElement("span");n.innerHTML="&nbsp;",k.addClass(n,"button gears");var o=document.createElement("span");o.innerHTML="Save",k.addClass(o,"button"),k.addClass(o,"save");var i=document.createElement("span");i.innerHTML="New",k.addClass(i,"button"),k.addClass(i,"save-as");var r=document.createElement("span");r.innerHTML="Revert",k.addClass(r,"button"),k.addClass(r,"revert");var s=e.__preset_select=document.createElement("select");if(e.load&&e.load.remembered?a.each(e.load.remembered,function(t,n){ie(e,n,n===e.preset)}):ie(e,U,!1),k.bind(s,"change",function(){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].innerHTML=e.__preset_select[t].value;e.preset=this.value}),t.appendChild(s),t.appendChild(n),t.appendChild(o),t.appendChild(i),t.appendChild(r),G){var l=document.getElementById("dg-local-explain"),c=document.getElementById("dg-local-storage");document.getElementById("dg-save-locally").style.display="block","true"===localStorage.getItem(oe(0,"isLocal"))&&c.setAttribute("checked","checked"),re(e,l),k.bind(c,"change",function(){e.useLocalStorage=!e.useLocalStorage,re(e,l)})}var d=document.getElementById("dg-new-constructor");k.bind(d,"keydown",function(e){!e.metaKey||67!==e.which&&67!==e.keyCode||X.hide()}),k.bind(n,"click",function(){d.innerHTML=JSON.stringify(e.getSaveObject(),void 0,2),X.show(),d.focus(),d.select()}),k.bind(o,"click",function(){e.save()}),k.bind(i,"click",function(){var t=prompt("Enter a new preset name.");t&&e.saveAs(t)}),k.bind(r,"click",function(){e.revert()})}(e),-1===e.__rememberedObjects.indexOf(t)&&e.__rememberedObjects.push(t)}),this.autoPlace&&ae(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,this.__rememberedObjects.length>0&&(e.preset=this.preset,e.remembered||(e.remembered={}),e.remembered[this.preset]=se(this)),e.folders={},a.each(this.__folders,function(t,n){e.folders[n]=t.getSaveObject()}),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=se(this),$(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered[U]=se(this,!0)),this.load.remembered[e]=se(this),this.preset=e,ie(this,e,!0),this.saveToLocalStorageIfPossible()},revert:function(e){a.each(this.__controllers,function(t){this.getRoot().load.remembered?te(e||this.getRoot(),t):t.setValue(t.initialValue),t.__onFinishChange&&t.__onFinishChange.call(t,t.getValue())},this),a.each(this.__folders,function(e){e.revert(e)}),e||$(this.getRoot(),!1)},listen:function(e){var t=0===this.__listening.length;this.__listening.push(e),t&&function e(t){0!==t.length&&V.call(window,function(){e(t)}),a.each(t,function(e){e.updateDisplay()})}(this.__listening)},updateDisplay:function(){a.each(this.__controllers,function(e){e.updateDisplay()}),a.each(this.__folders,function(e){e.updateDisplay()})}});var le={Color:v,math:h,interpret:d};n.color=le;var ce={Controller:x,BooleanController:S,OptionController:O,StringController:R,NumberController:L,NumberControllerBox:B,NumberControllerSlider:N,FunctionController:j,ColorController:H};n.controllers=ce;var de={dom:k};n.dom=de;var ue={GUI:W};n.gui=ue;var he=W;n.GUI=he;var _e={color:le,controllers:ce,dom:de,gui:ue,GUI:he};n.default=_e},{}],QCba:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.afterEach=n.afterAll=n.beforeEach=n.beforeAll=n.it=n.describe=n.resetRoot=n.getRoot=void 0;var o,i,r=[];function a(){i=o={type:"describe",name:"",children:[]},r.push(i)}a(),n.getRoot=function(){return o},n.resetRoot=a,n.describe=function(e,t){var n=null!=(i=r[r.length-1])?i:o,a={type:"describe",name:e,parent:n,children:[]};n.children.push(a),i=a,r.push(i),t(),r.pop(),i=r[r.length-1]},n.it=function(e,t){i.children.push({type:"it",name:e,parent:i,hook:t})},n.beforeAll=function(e){i.beforeAll=e},n.beforeEach=function(e){i.beforeEach=e},n.afterAll=function(e){i.afterAll=e},n.afterEach=function(e){i.afterEach=e}},{}],cKRm:[function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,r){function a(e){try{l(o.next(e))}catch(t){r(t)}}function s(e){try{l(o.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((o=o.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(n,"__esModule",{value:!0}),n.runSingle=n.runAll=void 0;var r=e("./index");function a(e,t){return o(this,void 0,void 0,function(){var n,o,r;return i(this,function(i){switch(i.label){case 0:return[4,s("beforeAll",null==e?void 0:e.beforeAll,t)];case 1:i.sent(),n=0,o=e.children,i.label=2;case 2:return n<o.length?(r=o[n],[4,s("beforeEach",null==e?void 0:e.beforeEach,t)]):[3,10];case 3:return i.sent(),"describe"!==r.type?[3,5]:[4,a(r,t)];case 4:return i.sent(),[3,7];case 5:return"it"!==r.type?[3,7]:[4,s(r.name,r.hook,t)];case 6:i.sent(),i.label=7;case 7:return[4,s("afterEach",null==e?void 0:e.afterEach,t)];case 8:i.sent(),i.label=9;case 9:return n++,[3,2];case 10:return[4,s("afterAll",null==e?void 0:e.afterAll,t)];case 11:return i.sent(),[2]}})})}function s(e,t,n){return o(this,void 0,void 0,function(){var o,r;return i(this,function(i){switch(i.label){case 0:if(!t)return[2];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,t()];case 2:return o=i.sent(),n.results.push({name:[e],status:"pass",meta:o}),[3,4];case 3:return r=i.sent(),n.results.push({name:[e],status:"exception",meta:r}),[3,4];case 4:return[2]}})})}n.runAll=function(){return o(this,void 0,void 0,function(){var e;return i(this,function(t){switch(t.label){case 0:return e={results:[]},[4,a((0,r.getRoot)(),e)];case 1:return t.sent(),[2,e.results]}})})},n.runSingle=function(e){return o(this,void 0,void 0,function(){var t,n,o,r,a,l,c,d;return i(this,function(i){switch(i.label){case 0:for(t={results:[]},n=[],o=e.parent;o;)n.unshift(o),o=o.parent;r=0,a=n,i.label=1;case 1:return r<a.length?[4,s("beforeAll",(d=a[r]).beforeAll,t)]:[3,5];case 2:return i.sent(),[4,s("beforeEach",d.beforeAll,t)];case 3:i.sent(),i.label=4;case 4:return r++,[3,1];case 5:return[4,s(e.name,e.hook,t)];case 6:i.sent(),l=0,c=n,i.label=7;case 7:return l<c.length?[4,s("afterEach",(d=c[l]).afterEach,t)]:[3,11];case 8:return i.sent(),[4,s("afterAll",d.afterAll,t)];case 9:i.sent(),i.label=10;case 10:return l++,[3,7];case 11:return[2]}})})}},{"./index":"QCba"}],sRuM:[function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t};Object.defineProperty(n,"__esModule",{value:!0}),n.createUI=void 0;var a=r(e("dat.gui")),s=e("./index"),l=e("./runner");n.createUI=function(e){!function e(t,n){n||(n=new a.GUI({name:t.name}));for(var o=function(t){var o;if("it"===t.type){var i=((o={})[t.name]=function(){return(0,l.runSingle)(t)},o);n.add(i,t.name)}if("describe"===t.type){var r=n.addFolder(t.name);e(t,r)}},i=0,r=t.children;i<r.length;i++)o(r[i])}((0,s.getRoot)(),e)}},{"dat.gui":"KkZG","./index":"QCba","./runner":"cKRm"}],kLTt:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.runAll=n.getRoot=n.afterEach=n.afterAll=n.beforeEach=n.beforeAll=n.it=n.describe=n.createUI=void 0;var o=e("./ui");Object.defineProperty(n,"createUI",{enumerable:!0,get:function(){return o.createUI}});var i=e("./index");Object.defineProperty(n,"describe",{enumerable:!0,get:function(){return i.describe}}),Object.defineProperty(n,"it",{enumerable:!0,get:function(){return i.it}}),Object.defineProperty(n,"beforeAll",{enumerable:!0,get:function(){return i.beforeAll}}),Object.defineProperty(n,"beforeEach",{enumerable:!0,get:function(){return i.beforeEach}}),Object.defineProperty(n,"afterAll",{enumerable:!0,get:function(){return i.afterAll}}),Object.defineProperty(n,"afterEach",{enumerable:!0,get:function(){return i.afterEach}}),Object.defineProperty(n,"getRoot",{enumerable:!0,get:function(){return i.getRoot}});var r=e("./runner");Object.defineProperty(n,"runAll",{enumerable:!0,get:function(){return r.runAll}})},{"./ui":"sRuM","./index":"QCba","./runner":"cKRm"}]},{},["kLTt"]);
},{}],"KkZG":[function(require,module,exports) {
"use strict";function e(e){if(e&&"undefined"!=typeof window){var t=document.createElement("style");return t.setAttribute("type","text/css"),t.innerHTML=e,document.head.appendChild(t),e}}function t(e,t){var n=e.__state.conversionName.toString(),o=Math.round(e.r),i=Math.round(e.g),r=Math.round(e.b),s=e.a,a=Math.round(e.h),l=e.s.toFixed(1),d=e.v.toFixed(1);if(t||"THREE_CHAR_HEX"===n||"SIX_CHAR_HEX"===n){for(var c=e.hex.toString(16);c.length<6;)c="0"+c;return"#"+c}return"CSS_RGB"===n?"rgb("+o+","+i+","+r+")":"CSS_RGBA"===n?"rgba("+o+","+i+","+r+","+s+")":"HEX"===n?"0x"+e.hex.toString(16):"RGB_ARRAY"===n?"["+o+","+i+","+r+"]":"RGBA_ARRAY"===n?"["+o+","+i+","+r+","+s+"]":"RGB_OBJ"===n?"{r:"+o+",g:"+i+",b:"+r+"}":"RGBA_OBJ"===n?"{r:"+o+",g:"+i+",b:"+r+",a:"+s+"}":"HSV_OBJ"===n?"{h:"+a+",s:"+l+",v:"+d+"}":"HSVA_OBJ"===n?"{h:"+a+",s:"+l+",v:"+d+",a:"+s+"}":"unknown format"}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.GUI=exports.gui=exports.dom=exports.controllers=exports.color=void 0;var n=Array.prototype.forEach,o=Array.prototype.slice,i={BREAK:{},extend:function(e){return this.each(o.call(arguments,1),function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(n){this.isUndefined(t[n])||(e[n]=t[n])}.bind(this))},this),e},defaults:function(e){return this.each(o.call(arguments,1),function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(n){this.isUndefined(e[n])&&(e[n]=t[n])}.bind(this))},this),e},compose:function(){var e=o.call(arguments);return function(){for(var t=o.call(arguments),n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},each:function(e,t,o){if(e)if(n&&e.forEach&&e.forEach===n)e.forEach(t,o);else if(e.length===e.length+0){var i,r=void 0;for(r=0,i=e.length;r<i;r++)if(r in e&&t.call(o,e[r],r)===this.BREAK)return}else for(var s in e)if(t.call(o,e[s],s)===this.BREAK)return},defer:function(e){setTimeout(e,0)},debounce:function(e,t,n){var o=void 0;return function(){var i=this,r=arguments;var s=n||!o;clearTimeout(o),o=setTimeout(function(){o=null,n||e.apply(i,r)},t),s&&e.apply(i,r)}},toArray:function(e){return e.toArray?e.toArray():o.call(e)},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isNaN:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return isNaN(e)}),isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return!1===e||!0===e},isFunction:function(e){return e instanceof Function}},r=[{litmus:i.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString(),0)}},write:t},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString(),0)}},write:t},CSS_RGB:{read:function(e){var t=e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:t},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:t}}},{litmus:i.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:i.isArray,conversions:{RGB_ARRAY:{read:function(e){return 3===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return 4===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:i.isObject,conversions:{RGBA_OBJ:{read:function(e){return!!(i.isNumber(e.r)&&i.isNumber(e.g)&&i.isNumber(e.b)&&i.isNumber(e.a))&&{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return!!(i.isNumber(e.r)&&i.isNumber(e.g)&&i.isNumber(e.b))&&{space:"RGB",r:e.r,g:e.g,b:e.b}},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return!!(i.isNumber(e.h)&&i.isNumber(e.s)&&i.isNumber(e.v)&&i.isNumber(e.a))&&{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return!!(i.isNumber(e.h)&&i.isNumber(e.s)&&i.isNumber(e.v))&&{space:"HSV",h:e.h,s:e.s,v:e.v}},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}],s=void 0,a=void 0,l=function(){a=!1;var e=arguments.length>1?i.toArray(arguments):arguments[0];return i.each(r,function(t){if(t.litmus(e))return i.each(t.conversions,function(t,n){if(s=t.read(e),!1===a&&!1!==s)return a=s,s.conversionName=n,s.conversion=t,i.BREAK}),i.BREAK}),a},d=void 0,c={hsv_to_rgb:function(e,t,n){var o=Math.floor(e/60)%6,i=e/60-Math.floor(e/60),r=n*(1-t),s=n*(1-i*t),a=n*(1-(1-i)*t),l=[[n,a,r],[s,n,r],[r,n,a],[r,s,n],[a,r,n],[n,r,s]][o];return{r:255*l[0],g:255*l[1],b:255*l[2]}},rgb_to_hsv:function(e,t,n){var o=Math.min(e,t,n),i=Math.max(e,t,n),r=i-o,s=void 0;return 0===i?{h:NaN,s:0,v:0}:(s=e===i?(t-n)/r:t===i?2+(n-e)/r:4+(e-t)/r,(s/=6)<0&&(s+=1),{h:360*s,s:r/i,v:i/255})},rgb_to_hex:function(e,t,n){var o=this.hex_with_component(0,2,e);return o=this.hex_with_component(o,1,t),o=this.hex_with_component(o,0,n)},component_from_hex:function(e,t){return e>>8*t&255},hex_with_component:function(e,t,n){return n<<(d=8*t)|e&~(255<<d)}},u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},h=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),p=function e(t,n,o){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,o)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(o):void 0},f=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},m=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},g=function(){function e(){if(_(this,e),this.__state=l.apply(this,arguments),!1===this.__state)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return h(e,[{key:"toString",value:function(){return t(this)}},{key:"toHexString",value:function(){return t(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),e}();function b(e,t,n){Object.defineProperty(e,t,{get:function(){return"RGB"===this.__state.space?this.__state[t]:(g.recalculateRGB(this,t,n),this.__state[t])},set:function(e){"RGB"!==this.__state.space&&(g.recalculateRGB(this,t,n),this.__state.space="RGB"),this.__state[t]=e}})}function v(e,t){Object.defineProperty(e,t,{get:function(){return"HSV"===this.__state.space?this.__state[t]:(g.recalculateHSV(this),this.__state[t])},set:function(e){"HSV"!==this.__state.space&&(g.recalculateHSV(this),this.__state.space="HSV"),this.__state[t]=e}})}g.recalculateRGB=function(e,t,n){if("HEX"===e.__state.space)e.__state[t]=c.component_from_hex(e.__state.hex,n);else{if("HSV"!==e.__state.space)throw new Error("Corrupted color state");i.extend(e.__state,c.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v))}},g.recalculateHSV=function(e){var t=c.rgb_to_hsv(e.r,e.g,e.b);i.extend(e.__state,{s:t.s,v:t.v}),i.isNaN(t.h)?i.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=t.h},g.COMPONENTS=["r","g","b","h","s","v","hex","a"],b(g.prototype,"r",2),b(g.prototype,"g",1),b(g.prototype,"b",0),v(g.prototype,"h"),v(g.prototype,"s"),v(g.prototype,"v"),Object.defineProperty(g.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(g.prototype,"hex",{get:function(){return"HEX"!==this.__state.space&&(this.__state.hex=c.rgb_to_hex(this.r,this.g,this.b),this.__state.space="HEX"),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}});var y=function(){function e(t,n){_(this,e),this.initialValue=t[n],this.domElement=document.createElement("div"),this.object=t,this.property=n,this.__onChange=void 0,this.__onFinishChange=void 0}return h(e,[{key:"onChange",value:function(e){return this.__onChange=e,this}},{key:"onFinishChange",value:function(e){return this.__onFinishChange=e,this}},{key:"setValue",value:function(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),e}(),w={HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},x={};i.each(w,function(e,t){i.each(e,function(e){x[e]=t})});var E=/(\d+(\.\d+)?)px/;function C(e){if("0"===e||i.isUndefined(e))return 0;var t=e.match(E);return i.isNull(t)?0:parseFloat(t[1])}var A={makeSelectable:function(e,t){void 0!==e&&void 0!==e.style&&(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off")},makeFullscreen:function(e,t,n){var o=n,r=t;i.isUndefined(r)&&(r=!0),i.isUndefined(o)&&(o=!0),e.style.position="absolute",r&&(e.style.left=0,e.style.right=0),o&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(e,t,n,o){var r=n||{},s=x[t];if(!s)throw new Error("Event type "+t+" not supported.");var a=document.createEvent(s);switch(s){case"MouseEvents":var l=r.x||r.clientX||0,d=r.y||r.clientY||0;a.initMouseEvent(t,r.bubbles||!1,r.cancelable||!0,window,r.clickCount||1,0,0,l,d,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var c=a.initKeyboardEvent||a.initKeyEvent;i.defaults(r,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),c(t,r.bubbles||!1,r.cancelable,window,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.keyCode,r.charCode);break;default:a.initEvent(t,r.bubbles||!1,r.cancelable||!0)}i.defaults(a,o),e.dispatchEvent(a)},bind:function(e,t,n,o){var i=o||!1;return e.addEventListener?e.addEventListener(t,n,i):e.attachEvent&&e.attachEvent("on"+t,n),A},unbind:function(e,t,n,o){var i=o||!1;return e.removeEventListener?e.removeEventListener(t,n,i):e.detachEvent&&e.detachEvent("on"+t,n),A},addClass:function(e,t){if(void 0===e.className)e.className=t;else if(e.className!==t){var n=e.className.split(/ +/);-1===n.indexOf(t)&&(n.push(t),e.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return A},removeClass:function(e,t){if(t)if(e.className===t)e.removeAttribute("class");else{var n=e.className.split(/ +/),o=n.indexOf(t);-1!==o&&(n.splice(o,1),e.className=n.join(" "))}else e.className=void 0;return A},hasClass:function(e,t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||!1},getWidth:function(e){var t=getComputedStyle(e);return C(t["border-left-width"])+C(t["border-right-width"])+C(t["padding-left"])+C(t["padding-right"])+C(t.width)},getHeight:function(e){var t=getComputedStyle(e);return C(t["border-top-width"])+C(t["border-bottom-width"])+C(t["padding-top"])+C(t["padding-bottom"])+C(t.height)},getOffset:function(e){var t=e,n={left:0,top:0};if(t.offsetParent)do{n.left+=t.offsetLeft,n.top+=t.offsetTop,t=t.offsetParent}while(t);return n},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}},k=function(e){function t(e,n){_(this,t);var o=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),i=o;return o.__prev=o.getValue(),o.__checkbox=document.createElement("input"),o.__checkbox.setAttribute("type","checkbox"),A.bind(o.__checkbox,"change",function(){i.setValue(!i.__prev)},!1),o.domElement.appendChild(o.__checkbox),o.updateDisplay(),o}return f(t,y),h(t,[{key:"setValue",value:function(e){var n=p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),n}},{key:"updateDisplay",value:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(),S=function(e){function t(e,n,o){_(this,t);var r=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),s=o,a=r;if(r.__select=document.createElement("select"),i.isArray(s)){var l={};i.each(s,function(e){l[e]=e}),s=l}return i.each(s,function(e,t){var n=document.createElement("option");n.innerHTML=t,n.setAttribute("value",e),a.__select.appendChild(n)}),r.updateDisplay(),A.bind(r.__select,"change",function(){var e=this.options[this.selectedIndex].value;a.setValue(e)}),r.domElement.appendChild(r.__select),r}return f(t,y),h(t,[{key:"setValue",value:function(e){var n=p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),n}},{key:"updateDisplay",value:function(){return A.isActive(this.__select)?this:(this.__select.value=this.getValue(),p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this))}}]),t}(),O=function(e){function t(e,n){_(this,t);var o=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),i=o;function r(){i.setValue(i.__input.value)}return o.__input=document.createElement("input"),o.__input.setAttribute("type","text"),A.bind(o.__input,"keyup",r),A.bind(o.__input,"change",r),A.bind(o.__input,"blur",function(){i.__onFinishChange&&i.__onFinishChange.call(i,i.getValue())}),A.bind(o.__input,"keydown",function(e){13===e.keyCode&&this.blur()}),o.updateDisplay(),o.domElement.appendChild(o.__input),o}return f(t,y),h(t,[{key:"updateDisplay",value:function(){return A.isActive(this.__input)||(this.__input.value=this.getValue()),p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}();function T(e){var t=e.toString();return t.indexOf(".")>-1?t.length-t.indexOf(".")-1:0}var L=function(e){function t(e,n,o){_(this,t);var r=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),s=o||{};return r.__min=s.min,r.__max=s.max,r.__step=s.step,i.isUndefined(r.__step)?0===r.initialValue?r.__impliedStep=1:r.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(r.initialValue))/Math.LN10))/10:r.__impliedStep=r.__step,r.__precision=T(r.__impliedStep),r}return f(t,y),h(t,[{key:"setValue",value:function(e){var n=e;return void 0!==this.__min&&n<this.__min?n=this.__min:void 0!==this.__max&&n>this.__max&&(n=this.__max),void 0!==this.__step&&n%this.__step!=0&&(n=Math.round(n/this.__step)*this.__step),p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,n)}},{key:"min",value:function(e){return this.__min=e,this}},{key:"max",value:function(e){return this.__max=e,this}},{key:"step",value:function(e){return this.__step=e,this.__impliedStep=e,this.__precision=T(e),this}}]),t}();function R(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n}var B=function(e){function t(e,n,o){_(this,t);var r=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,o));r.__truncationSuspended=!1;var s=r,a=void 0;function l(){s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}function d(e){var t=a-e.clientY;s.setValue(s.getValue()+t*s.__impliedStep),a=e.clientY}function c(){A.unbind(window,"mousemove",d),A.unbind(window,"mouseup",c),l()}return r.__input=document.createElement("input"),r.__input.setAttribute("type","text"),A.bind(r.__input,"change",function(){var e=parseFloat(s.__input.value);i.isNaN(e)||s.setValue(e)}),A.bind(r.__input,"blur",function(){l()}),A.bind(r.__input,"mousedown",function(e){A.bind(window,"mousemove",d),A.bind(window,"mouseup",c),a=e.clientY}),A.bind(r.__input,"keydown",function(e){13===e.keyCode&&(s.__truncationSuspended=!0,this.blur(),s.__truncationSuspended=!1,l())}),r.updateDisplay(),r.domElement.appendChild(r.__input),r}return f(t,L),h(t,[{key:"updateDisplay",value:function(){return this.__input.value=this.__truncationSuspended?this.getValue():R(this.getValue(),this.__precision),p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}();function N(e,t,n,o,i){return o+(e-t)/(n-t)*(i-o)}var H=function(e){function t(e,n,o,i,r){_(this,t);var s=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,{min:o,max:i,step:r})),a=s;function l(e){e.preventDefault();var t=a.__background.getBoundingClientRect();return a.setValue(N(e.clientX,t.left,t.right,a.__min,a.__max)),!1}function d(){A.unbind(window,"mousemove",l),A.unbind(window,"mouseup",d),a.__onFinishChange&&a.__onFinishChange.call(a,a.getValue())}function c(e){var t=e.touches[0].clientX,n=a.__background.getBoundingClientRect();a.setValue(N(t,n.left,n.right,a.__min,a.__max))}function u(){A.unbind(window,"touchmove",c),A.unbind(window,"touchend",u),a.__onFinishChange&&a.__onFinishChange.call(a,a.getValue())}return s.__background=document.createElement("div"),s.__foreground=document.createElement("div"),A.bind(s.__background,"mousedown",function(e){document.activeElement.blur(),A.bind(window,"mousemove",l),A.bind(window,"mouseup",d),l(e)}),A.bind(s.__background,"touchstart",function(e){if(1!==e.touches.length)return;A.bind(window,"touchmove",c),A.bind(window,"touchend",u),c(e)}),A.addClass(s.__background,"slider"),A.addClass(s.__foreground,"slider-fg"),s.updateDisplay(),s.__background.appendChild(s.__foreground),s.domElement.appendChild(s.__background),s}return f(t,L),h(t,[{key:"updateDisplay",value:function(){var e=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*e+"%",p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(),F=function(e){function t(e,n,o){_(this,t);var i=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),r=i;return i.__button=document.createElement("div"),i.__button.innerHTML=void 0===o?"Fire":o,A.bind(i.__button,"click",function(e){return e.preventDefault(),r.fire(),!1}),A.addClass(i.__button,"button"),i.domElement.appendChild(i.__button),i}return f(t,y),h(t,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),t}(),P=function(e){function t(e,n){_(this,t);var o=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));o.__color=new g(o.getValue()),o.__temp=new g(0);var r=o;o.domElement=document.createElement("div"),A.makeSelectable(o.domElement,!1),o.__selector=document.createElement("div"),o.__selector.className="selector",o.__saturation_field=document.createElement("div"),o.__saturation_field.className="saturation-field",o.__field_knob=document.createElement("div"),o.__field_knob.className="field-knob",o.__field_knob_border="2px solid ",o.__hue_knob=document.createElement("div"),o.__hue_knob.className="hue-knob",o.__hue_field=document.createElement("div"),o.__hue_field.className="hue-field",o.__input=document.createElement("input"),o.__input.type="text",o.__input_textShadow="0 1px 1px ",A.bind(o.__input,"keydown",function(e){13===e.keyCode&&h.call(this)}),A.bind(o.__input,"blur",h),A.bind(o.__selector,"mousedown",function(){A.addClass(this,"drag").bind(window,"mouseup",function(){A.removeClass(r.__selector,"drag")})}),A.bind(o.__selector,"touchstart",function(){A.addClass(this,"drag").bind(window,"touchend",function(){A.removeClass(r.__selector,"drag")})});var s=document.createElement("div");function a(e){f(e),A.bind(window,"mousemove",f),A.bind(window,"touchmove",f),A.bind(window,"mouseup",c),A.bind(window,"touchend",c)}function d(e){b(e),A.bind(window,"mousemove",b),A.bind(window,"touchmove",b),A.bind(window,"mouseup",u),A.bind(window,"touchend",u)}function c(){A.unbind(window,"mousemove",f),A.unbind(window,"touchmove",f),A.unbind(window,"mouseup",c),A.unbind(window,"touchend",c),p()}function u(){A.unbind(window,"mousemove",b),A.unbind(window,"touchmove",b),A.unbind(window,"mouseup",u),A.unbind(window,"touchend",u),p()}function h(){var e=l(this.value);!1!==e?(r.__color.__state=e,r.setValue(r.__color.toOriginal())):this.value=r.__color.toString()}function p(){r.__onFinishChange&&r.__onFinishChange.call(r,r.__color.toOriginal())}function f(e){-1===e.type.indexOf("touch")&&e.preventDefault();var t=r.__saturation_field.getBoundingClientRect(),n=e.touches&&e.touches[0]||e,o=n.clientX,i=n.clientY,s=(o-t.left)/(t.right-t.left),a=1-(i-t.top)/(t.bottom-t.top);return a>1?a=1:a<0&&(a=0),s>1?s=1:s<0&&(s=0),r.__color.v=a,r.__color.s=s,r.setValue(r.__color.toOriginal()),!1}function b(e){-1===e.type.indexOf("touch")&&e.preventDefault();var t=r.__hue_field.getBoundingClientRect(),n=1-((e.touches&&e.touches[0]||e).clientY-t.top)/(t.bottom-t.top);return n>1?n=1:n<0&&(n=0),r.__color.h=360*n,r.setValue(r.__color.toOriginal()),!1}return i.extend(o.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),i.extend(o.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:o.__field_knob_border+(o.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),i.extend(o.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),i.extend(o.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),i.extend(s.style,{width:"100%",height:"100%",background:"none"}),j(s,"top","rgba(0,0,0,0)","#000"),i.extend(o.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),V(o.__hue_field),i.extend(o.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:o.__input_textShadow+"rgba(0,0,0,0.7)"}),A.bind(o.__saturation_field,"mousedown",a),A.bind(o.__saturation_field,"touchstart",a),A.bind(o.__field_knob,"mousedown",a),A.bind(o.__field_knob,"touchstart",a),A.bind(o.__hue_field,"mousedown",d),A.bind(o.__hue_field,"touchstart",d),o.__saturation_field.appendChild(s),o.__selector.appendChild(o.__field_knob),o.__selector.appendChild(o.__saturation_field),o.__selector.appendChild(o.__hue_field),o.__hue_field.appendChild(o.__hue_knob),o.domElement.appendChild(o.__input),o.domElement.appendChild(o.__selector),o.updateDisplay(),o}return f(t,y),h(t,[{key:"updateDisplay",value:function(){var e=l(this.getValue());if(!1!==e){var t=!1;i.each(g.COMPONENTS,function(n){if(!i.isUndefined(e[n])&&!i.isUndefined(this.__color.__state[n])&&e[n]!==this.__color.__state[n])return t=!0,{}},this),t&&i.extend(this.__color.__state,e)}i.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var n=this.__color.v<.5||this.__color.s>.5?255:0,o=255-n;i.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+n+","+n+","+n+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,j(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),i.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+n+","+n+","+n+")",textShadow:this.__input_textShadow+"rgba("+o+","+o+","+o+",.7)"})}}]),t}(),D=["-moz-","-o-","-webkit-","-ms-",""];function j(e,t,n,o){e.style.background="",i.each(D,function(i){e.style.cssText+="background: "+i+"linear-gradient("+t+", "+n+" 0%, "+o+" 100%); "})}function V(e){e.style.background="",e.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",e.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}var I={load:function(e,t){var n=t||document,o=n.createElement("link");o.type="text/css",o.rel="stylesheet",o.href=e,n.getElementsByTagName("head")[0].appendChild(o)},inject:function(e,t){var n=t||document,o=document.createElement("style");o.type="text/css",o.innerHTML=e;var i=n.getElementsByTagName("head")[0];try{i.appendChild(o)}catch(r){}}},z='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>',M=function(e,t){var n=e[t];return i.isArray(arguments[2])||i.isObject(arguments[2])?new S(e,t,arguments[2]):i.isNumber(n)?i.isNumber(arguments[2])&&i.isNumber(arguments[3])?i.isNumber(arguments[4])?new H(e,t,arguments[2],arguments[3],arguments[4]):new H(e,t,arguments[2],arguments[3]):i.isNumber(arguments[4])?new B(e,t,{min:arguments[2],max:arguments[3],step:arguments[4]}):new B(e,t,{min:arguments[2],max:arguments[3]}):i.isString(n)?new O(e,t):i.isFunction(n)?new F(e,t,""):i.isBoolean(n)?new k(e,t):null};function G(e){setTimeout(e,1e3/60)}var U=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||G,X=function(){function e(){_(this,e),this.backgroundElement=document.createElement("div"),i.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),A.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),i.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var t=this;A.bind(this.backgroundElement,"click",function(){t.hide()})}return h(e,[{key:"show",value:function(){var e=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),i.defer(function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform="scale(1)"})}},{key:"hide",value:function(){var e=this,t=function t(){e.domElement.style.display="none",e.backgroundElement.style.display="none",A.unbind(e.domElement,"webkitTransitionEnd",t),A.unbind(e.domElement,"transitionend",t),A.unbind(e.domElement,"oTransitionEnd",t)};A.bind(this.domElement,"webkitTransitionEnd",t),A.bind(this.domElement,"transitionend",t),A.bind(this.domElement,"oTransitionEnd",t),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-A.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-A.getHeight(this.domElement)/2+"px"}}]),e}(),K=e(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n");I.inject(K);var Y="dg",J=72,W=20,Q="Default",q=function(){try{return!!window.localStorage}catch(e){return!1}}(),Z=void 0,$=!0,ee=void 0,te=!1,ne=[],oe=function e(t){var n=this,o=t||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),A.addClass(this.domElement,Y),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],o=i.defaults(o,{closeOnTop:!1,autoPlace:!0,width:e.DEFAULT_WIDTH}),o=i.defaults(o,{resizable:o.autoPlace,hideable:o.autoPlace}),i.isUndefined(o.load)?o.load={preset:Q}:o.preset&&(o.load.preset=o.preset),i.isUndefined(o.parent)&&o.hideable&&ne.push(this),o.resizable=i.isUndefined(o.parent)&&o.resizable,o.autoPlace&&i.isUndefined(o.scrollable)&&(o.scrollable=!0);var r,s=q&&"true"===localStorage.getItem(ce(this,"isLocal")),a=void 0,l=void 0;if(Object.defineProperties(this,{parent:{get:function(){return o.parent}},scrollable:{get:function(){return o.scrollable}},autoPlace:{get:function(){return o.autoPlace}},closeOnTop:{get:function(){return o.closeOnTop}},preset:{get:function(){return n.parent?n.getRoot().preset:o.load.preset},set:function(e){n.parent?n.getRoot().preset=e:o.load.preset=e,ge(this),n.revert()}},width:{get:function(){return o.width},set:function(e){o.width=e,fe(n,e)}},name:{get:function(){return o.name},set:function(e){o.name=e,l&&(l.innerHTML=o.name)}},closed:{get:function(){return o.closed},set:function(t){o.closed=t,o.closed?A.addClass(n.__ul,e.CLASS_CLOSED):A.removeClass(n.__ul,e.CLASS_CLOSED),this.onResize(),n.__closeButton&&(n.__closeButton.innerHTML=t?e.TEXT_OPEN:e.TEXT_CLOSED)}},load:{get:function(){return o.load}},useLocalStorage:{get:function(){return s},set:function(e){q&&(s=e,e?A.bind(window,"unload",a):A.unbind(window,"unload",a),localStorage.setItem(ce(n,"isLocal"),e))}}}),i.isUndefined(o.parent)){if(this.closed=o.closed||!1,A.addClass(this.domElement,e.CLASS_MAIN),A.makeSelectable(this.domElement,!1),q&&s){n.useLocalStorage=!0;var d=localStorage.getItem(ce(this,"gui"));d&&(o.load=JSON.parse(d))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=e.TEXT_CLOSED,A.addClass(this.__closeButton,e.CLASS_CLOSE_BUTTON),o.closeOnTop?(A.addClass(this.__closeButton,e.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(A.addClass(this.__closeButton,e.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),A.bind(this.__closeButton,"click",function(){n.closed=!n.closed})}else{void 0===o.closed&&(o.closed=!0);var c=document.createTextNode(o.name);A.addClass(c,"controller-name"),l=ie(n,c);A.addClass(this.__ul,e.CLASS_CLOSED),A.addClass(l,"title"),A.bind(l,"click",function(e){return e.preventDefault(),n.closed=!n.closed,!1}),o.closed||(this.closed=!1)}o.autoPlace&&(i.isUndefined(o.parent)&&($&&(ee=document.createElement("div"),A.addClass(ee,Y),A.addClass(ee,e.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(ee),$=!1),ee.appendChild(this.domElement),A.addClass(this.domElement,e.CLASS_AUTO_PLACE)),this.parent||fe(n,o.width)),this.__resizeHandler=function(){n.onResizeDebounced()},A.bind(window,"resize",this.__resizeHandler),A.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),A.bind(this.__ul,"transitionend",this.__resizeHandler),A.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),o.resizable&&pe(this),a=function(){q&&"true"===localStorage.getItem(ce(n,"isLocal"))&&localStorage.setItem(ce(n,"gui"),JSON.stringify(n.getSaveObject()))},this.saveToLocalStorageIfPossible=a,o.parent||((r=n.getRoot()).width+=1,i.defer(function(){r.width-=1}))};function ie(e,t,n){var o=document.createElement("li");return t&&o.appendChild(t),n?e.__ul.insertBefore(o,n):e.__ul.appendChild(o),e.onResize(),o}function re(e){A.unbind(window,"resize",e.__resizeHandler),e.saveToLocalStorageIfPossible&&A.unbind(window,"unload",e.saveToLocalStorageIfPossible)}function se(e,t){var n=e.__preset_select[e.__preset_select.selectedIndex];n.innerHTML=t?n.value+"*":n.value}function ae(e,t,n){if(n.__li=t,n.__gui=e,i.extend(n,{options:function(t){if(arguments.length>1){var o=n.__li.nextElementSibling;return n.remove(),de(e,n.object,n.property,{before:o,factoryArgs:[i.toArray(arguments)]})}if(i.isArray(t)||i.isObject(t)){var r=n.__li.nextElementSibling;return n.remove(),de(e,n.object,n.property,{before:r,factoryArgs:[t]})}},name:function(e){return n.__li.firstElementChild.firstElementChild.innerHTML=e,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof H){var o=new B(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});i.each(["updateDisplay","onChange","onFinishChange","step","min","max"],function(e){var t=n[e],i=o[e];n[e]=o[e]=function(){var e=Array.prototype.slice.call(arguments);return i.apply(o,e),t.apply(n,e)}}),A.addClass(t,"has-slider"),n.domElement.insertBefore(o.domElement,n.domElement.firstElementChild)}else if(n instanceof B){var r=function(t){if(i.isNumber(n.__min)&&i.isNumber(n.__max)){var o=n.__li.firstElementChild.firstElementChild.innerHTML,r=n.__gui.__listening.indexOf(n)>-1;n.remove();var s=de(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]});return s.name(o),r&&s.listen(),s}return t};n.min=i.compose(r,n.min),n.max=i.compose(r,n.max)}else n instanceof k?(A.bind(t,"click",function(){A.fakeEvent(n.__checkbox,"click")}),A.bind(n.__checkbox,"click",function(e){e.stopPropagation()})):n instanceof F?(A.bind(t,"click",function(){A.fakeEvent(n.__button,"click")}),A.bind(t,"mouseover",function(){A.addClass(n.__button,"hover")}),A.bind(t,"mouseout",function(){A.removeClass(n.__button,"hover")})):n instanceof P&&(A.addClass(t,"color"),n.updateDisplay=i.compose(function(e){return t.style.borderLeftColor=n.__color.toString(),e},n.updateDisplay),n.updateDisplay());n.setValue=i.compose(function(t){return e.getRoot().__preset_select&&n.isModified()&&se(e.getRoot(),!0),t},n.setValue)}function le(e,t){var n=e.getRoot(),o=n.__rememberedObjects.indexOf(t.object);if(-1!==o){var i=n.__rememberedObjectIndecesToControllers[o];if(void 0===i&&(i={},n.__rememberedObjectIndecesToControllers[o]=i),i[t.property]=t,n.load&&n.load.remembered){var r=n.load.remembered,s=void 0;if(r[e.preset])s=r[e.preset];else{if(!r[Q])return;s=r[Q]}if(s[o]&&void 0!==s[o][t.property]){var a=s[o][t.property];t.initialValue=a,t.setValue(a)}}}}function de(e,t,n,o){if(void 0===t[n])throw new Error('Object "'+t+'" has no property "'+n+'"');var i=void 0;if(o.color)i=new P(t,n);else{var r=[t,n].concat(o.factoryArgs);i=M.apply(e,r)}o.before instanceof y&&(o.before=o.before.__li),le(e,i),A.addClass(i.domElement,"c");var s=document.createElement("span");A.addClass(s,"property-name"),s.innerHTML=i.property;var a=document.createElement("div");a.appendChild(s),a.appendChild(i.domElement);var l=ie(e,a,o.before);return A.addClass(l,oe.CLASS_CONTROLLER_ROW),i instanceof P?A.addClass(l,"color"):A.addClass(l,u(i.getValue())),ae(e,l,i),e.__controllers.push(i),i}function ce(e,t){return document.location.href+"."+t}function ue(e,t,n){var o=document.createElement("option");o.innerHTML=t,o.value=t,e.__preset_select.appendChild(o),n&&(e.__preset_select.selectedIndex=e.__preset_select.length-1)}function _e(e,t){t.style.display=e.useLocalStorage?"block":"none"}function he(e){var t=e.__save_row=document.createElement("li");A.addClass(e.domElement,"has-save"),e.__ul.insertBefore(t,e.__ul.firstChild),A.addClass(t,"save-row");var n=document.createElement("span");n.innerHTML="&nbsp;",A.addClass(n,"button gears");var o=document.createElement("span");o.innerHTML="Save",A.addClass(o,"button"),A.addClass(o,"save");var r=document.createElement("span");r.innerHTML="New",A.addClass(r,"button"),A.addClass(r,"save-as");var s=document.createElement("span");s.innerHTML="Revert",A.addClass(s,"button"),A.addClass(s,"revert");var a=e.__preset_select=document.createElement("select");if(e.load&&e.load.remembered?i.each(e.load.remembered,function(t,n){ue(e,n,n===e.preset)}):ue(e,Q,!1),A.bind(a,"change",function(){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].innerHTML=e.__preset_select[t].value;e.preset=this.value}),t.appendChild(a),t.appendChild(n),t.appendChild(o),t.appendChild(r),t.appendChild(s),q){var l=document.getElementById("dg-local-explain"),d=document.getElementById("dg-local-storage");document.getElementById("dg-save-locally").style.display="block","true"===localStorage.getItem(ce(e,"isLocal"))&&d.setAttribute("checked","checked"),_e(e,l),A.bind(d,"change",function(){e.useLocalStorage=!e.useLocalStorage,_e(e,l)})}var c=document.getElementById("dg-new-constructor");A.bind(c,"keydown",function(e){!e.metaKey||67!==e.which&&67!==e.keyCode||Z.hide()}),A.bind(n,"click",function(){c.innerHTML=JSON.stringify(e.getSaveObject(),void 0,2),Z.show(),c.focus(),c.select()}),A.bind(o,"click",function(){e.save()}),A.bind(r,"click",function(){var t=prompt("Enter a new preset name.");t&&e.saveAs(t)}),A.bind(s,"click",function(){e.revert()})}function pe(e){var t=void 0;function n(n){return n.preventDefault(),e.width+=t-n.clientX,e.onResize(),t=n.clientX,!1}function o(){A.removeClass(e.__closeButton,oe.CLASS_DRAG),A.unbind(window,"mousemove",n),A.unbind(window,"mouseup",o)}function r(i){return i.preventDefault(),t=i.clientX,A.addClass(e.__closeButton,oe.CLASS_DRAG),A.bind(window,"mousemove",n),A.bind(window,"mouseup",o),!1}e.__resize_handle=document.createElement("div"),i.extend(e.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),A.bind(e.__resize_handle,"mousedown",r),A.bind(e.__closeButton,"mousedown",r),e.domElement.insertBefore(e.__resize_handle,e.domElement.firstElementChild)}function fe(e,t){e.domElement.style.width=t+"px",e.__save_row&&e.autoPlace&&(e.__save_row.style.width=t+"px"),e.__closeButton&&(e.__closeButton.style.width=t+"px")}function me(e,t){var n={};return i.each(e.__rememberedObjects,function(o,r){var s={},a=e.__rememberedObjectIndecesToControllers[r];i.each(a,function(e,n){s[n]=t?e.initialValue:e.getValue()}),n[r]=s}),n}function ge(e){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].value===e.preset&&(e.__preset_select.selectedIndex=t)}function be(e){0!==e.length&&U.call(window,function(){be(e)}),i.each(e,function(e){e.updateDisplay()})}oe.toggleHide=function(){te=!te,i.each(ne,function(e){e.domElement.style.display=te?"none":""})},oe.CLASS_AUTO_PLACE="a",oe.CLASS_AUTO_PLACE_CONTAINER="ac",oe.CLASS_MAIN="main",oe.CLASS_CONTROLLER_ROW="cr",oe.CLASS_TOO_TALL="taller-than-window",oe.CLASS_CLOSED="closed",oe.CLASS_CLOSE_BUTTON="close-button",oe.CLASS_CLOSE_TOP="close-top",oe.CLASS_CLOSE_BOTTOM="close-bottom",oe.CLASS_DRAG="drag",oe.DEFAULT_WIDTH=245,oe.TEXT_CLOSED="Close Controls",oe.TEXT_OPEN="Open Controls",oe._keydownHandler=function(e){"text"===document.activeElement.type||e.which!==J&&e.keyCode!==J||oe.toggleHide()},A.bind(window,"keydown",oe._keydownHandler,!1),i.extend(oe.prototype,{add:function(e,t){return de(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return de(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.splice(this.__controllers.indexOf(e),1);var t=this;i.defer(function(){t.onResize()})},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&ee.removeChild(this.domElement);var e=this;i.each(this.__folders,function(t){e.removeFolder(t)}),A.unbind(window,"keydown",oe._keydownHandler,!1),re(this)},addFolder:function(e){if(void 0!==this.__folders[e])throw new Error('You already have a folder in this GUI by the name "'+e+'"');var t={name:e,parent:this};t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]);var n=new oe(t);this.__folders[e]=n;var o=ie(this,n.domElement);return A.addClass(o,"folder"),n},removeFolder:function(e){this.__ul.removeChild(e.domElement.parentElement),delete this.__folders[e.name],this.load&&this.load.folders&&this.load.folders[e.name]&&delete this.load.folders[e.name],re(e);var t=this;i.each(e.__folders,function(t){e.removeFolder(t)}),i.defer(function(){t.onResize()})},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=A.getOffset(e.__ul).top,n=0;i.each(e.__ul.childNodes,function(t){e.autoPlace&&t===e.__save_row||(n+=A.getHeight(t))}),window.innerHeight-t-W<n?(A.addClass(e.domElement,oe.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-W+"px"):(A.removeClass(e.domElement,oe.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&i.defer(function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"}),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},onResizeDebounced:i.debounce(function(){this.onResize()},50),remember:function(){if(i.isUndefined(Z)&&((Z=new X).domElement.innerHTML=z),this.parent)throw new Error("You can only call remember on a top level GUI.");var e=this;i.each(Array.prototype.slice.call(arguments),function(t){0===e.__rememberedObjects.length&&he(e),-1===e.__rememberedObjects.indexOf(t)&&e.__rememberedObjects.push(t)}),this.autoPlace&&fe(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,this.__rememberedObjects.length>0&&(e.preset=this.preset,e.remembered||(e.remembered={}),e.remembered[this.preset]=me(this)),e.folders={},i.each(this.__folders,function(t,n){e.folders[n]=t.getSaveObject()}),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=me(this),se(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered[Q]=me(this,!0)),this.load.remembered[e]=me(this),this.preset=e,ue(this,e,!0),this.saveToLocalStorageIfPossible()},revert:function(e){i.each(this.__controllers,function(t){this.getRoot().load.remembered?le(e||this.getRoot(),t):t.setValue(t.initialValue),t.__onFinishChange&&t.__onFinishChange.call(t,t.getValue())},this),i.each(this.__folders,function(e){e.revert(e)}),e||se(this.getRoot(),!1)},listen:function(e){var t=0===this.__listening.length;this.__listening.push(e),t&&be(this.__listening)},updateDisplay:function(){i.each(this.__controllers,function(e){e.updateDisplay()}),i.each(this.__folders,function(e){e.updateDisplay()})}});var ve={Color:g,math:c,interpret:l};exports.color=ve;var ye={Controller:y,BooleanController:k,OptionController:S,StringController:O,NumberController:L,NumberControllerBox:B,NumberControllerSlider:H,FunctionController:F,ColorController:P};exports.controllers=ye;var we={dom:A};exports.dom=we;var xe={GUI:oe};exports.gui=xe;var Ee=oe;exports.GUI=Ee;var Ce={color:ve,controllers:ye,dom:we,gui:xe,GUI:Ee},Ae=Ce;exports.default=Ae;
},{}],"QCba":[function(require,module,exports) {
"use strict";var e=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),t=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(r){if(r&&r.__esModule)return r;var n={};if(null!=r)for(var i in r)"default"!==i&&Object.prototype.hasOwnProperty.call(r,i)&&e(n,r,i);return t(n,r),n},n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function u(e){try{s(n.next(e))}catch(t){o(t)}}function a(e){try{s(n.throw(e))}catch(t){o(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(u,a)}s((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var r,n,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return u.label++,{value:o[1],done:!1};case 5:u.label++,n=o[1],o=[0];continue;case 7:o=u.ops.pop(),u.trys.pop();continue;default:if(!(i=(i=u.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){u=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){u.label=o[1];break}if(6===o[0]&&u.label<i[1]){u.label=i[1],i=o;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(o);break}i[2]&&u.ops.pop(),u.trys.pop();continue}o=t.call(e,u)}catch(a){o=[6,a],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.runnerAddr=void 0;var o=require("./loader"),u=require("./config"),a=require("./tests/render"),s=require("./tests/labeling"),c=require("./tests/parser"),l=require("describe-it-browser"),f=r(require("dat.gui")),d=require("./tests/render/scenarios");exports.runnerAddr="http://"+u.runner.hostname+":"+u.runner.port;var h,b={reference:"https://mapgl.2gis.com/api/js",target:"https://jakarta.web-staging.2gis.ru/sdk/index.js",styleId:"c080bb6a-8134-4993-93a1-5b4d8c36a59b"},p=function(e){return n(void 0,void 0,void 0,function(){return i(this,function(t){return[2,console.log(e)]})})},v=function(e){return n(void 0,void 0,void 0,function(){return i(this,function(e){return[2,console.log("end")]})})};function g(e,t){var r=this;return new Promise(function(u,a){h&&h.destroy(),(0,o.load)(e).then(function(o){var a=h=new o.Map("map",{key:"042b5b75-f847-4f2a-b695-b5f58adc9dfd",zoomControl:"bottomRight",center:[82.897904,54.98318],style:b.styleId,zoom:16});a.once("idle",function(){return n(r,void 0,void 0,function(){var r,n;return i(this,function(i){switch(i.label){case 0:return r=a._impl,[4,p("Testing "+(e||"production"))];case 1:return i.sent(),n=u,[4,t(r)];case 2:return n.apply(void 0,[i.sent()]),[2]}})})})})})}function y(e){return n(this,void 0,void 0,function(){var t,r,n,o,u,a,s,c,l,f,d,h,y;return i(this,function(i){switch(i.label){case 0:return[4,g(b.reference,e)];case 1:return t=i.sent(),[4,g(b.target,e)];case 2:for(o in r=i.sent(),n=[],t)n.push(o);u=0,i.label=3;case 3:return u<n.length?(a=n[u],s=t[a],c=r[a],[4,p(a)]):[3,9];case 4:for(f in i.sent(),l=[],s)l.push(f);d=0,i.label=5;case 5:return d<l.length?(h=l[d],"-"!==(y=(c[h]-s[h]).toFixed(2))[0]&&(y="+"+y),[4,p("  "+h+" "+y+" ("+c[h]+"/"+s[h]+")")]):[3,8];case 6:i.sent(),i.label=7;case 7:return d++,[3,5];case 8:return u++,[3,3];case 9:return[4,v(!0)];case 10:return i.sent(),[2]}})})}(0,l.it)("Parser",function(){return y(c.measureParser)}),(0,l.it)("Labeling",function(){return y(s.measureLabeling)}),(0,l.describe)("Rendering",function(){var e=function(e){(0,l.it)(e,function(){return y(function(t){return(0,a.measureRender)(t,e)})})};for(var t in d.cases)e(t)});var w=new f.GUI({width:300});w.add(b,"reference"),w.add(b,"target"),w.add(b,"styleId"),(0,l.createUI)(w.addFolder("Cases"));
},{"./loader":"ul02","./config":"C9JJ","./tests/render":"Yfwx","./tests/labeling":"SeX5","./tests/parser":"PsmS","describe-it-browser":"nQ8B","dat.gui":"KkZG","./tests/render/scenarios":"oGxm"}]},{},["QCba"], null)
//# sourceMappingURL=https://itanka9.github.io/visual-perf-tests/src.36218e72.js.map